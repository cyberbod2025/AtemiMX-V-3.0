const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./AdminPanel-C6m41vBa.js","./react-vendor-BfikQoQB.js","./vendor-CUhUAKZ9.js","./userService-jJ5dR-kP.js","./firebase-Bi_eiI5S.js","./Sase310Module-CN1Vf2U1.js","./firestoreService-CHQ4RvRt.js","./Sidebar-CxeLwP5y.js","./AtemiDashboard-DhK_34lr.js","./GlobalMenuModal-DolNhYuY.js","./PinPreferencesModal-DDNwYV8g.js","./SecurityPinScreen-CeaOoImb.js","./IdeaIntro-ZEzejWem.js","./AngelGuardianModal-CHck2nwC.js","./AngelGuardianFab-MgP4xA0v.js"])))=>i.map(i=>d[i]);
import{r as o,j as n,G as w,d as Re}from"./react-vendor-BfikQoQB.js";import{A as Ne,m as je}from"./vendor-CUhUAKZ9.js";import{g as Te,a as De,i as Oe,b as Le,c as Ce,d as Me,o as Ve,e as Be,s as ke,F as te,f as Fe,h as Ue,j as Ge,k as ze,l as Ke,m as G}from"./firebase-Bi_eiI5S.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const He=""+new URL("atemi-startup-Ch2NV5O7.mp3",import.meta.url).href,Xe=1.5,qe=.35,We=.12,Ye=1e3;function $e(){const[e,t]=o.useState(()=>Date.now()),s=o.useRef(null);o.useEffect(()=>{if(typeof Audio>"u")return;const r=new Audio(He);return s.current=r,()=>{r.pause(),s.current=null}},[]);const i=o.useCallback(()=>{const r=s.current;if(!r)return;r.pause(),r.currentTime=0,r.volume=qe;const a=r.play();typeof(a==null?void 0:a.then)=="function"&&a.then(()=>{window.setTimeout(()=>{r.paused||(r.volume=We)},Ye)}).catch(()=>{})},[]);return o.useEffect(()=>{if(typeof document>"u")return;const r=new MutationObserver(()=>{t(Date.now()),i()});return r.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>r.disconnect()},[i]),n.jsx(Ne,{children:n.jsx(je.div,{className:"role-glow",initial:{opacity:0,scale:1.05},animate:{opacity:.35,scale:1},exit:{opacity:0,scale:1},transition:{duration:Xe,ease:"easeInOut"}},e)})}function Je(){return n.jsxs("div",{className:"atemi-bg","aria-hidden":"true",children:[n.jsx("div",{className:"atemi-layer atemi-gradient"}),n.jsx("div",{className:"atemi-layer atemi-lines"}),n.jsx("div",{className:"atemi-overlay"})]})}const Qe="modulepreload",Ze=function(e,t){return new URL(e,t).href},J={},y=function(t,s,i){let r=Promise.resolve();if(s&&s.length>0){let c=function(l){return Promise.all(l.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const u=document.getElementsByTagName("link"),g=document.querySelector("meta[property=csp-nonce]"),m=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));r=c(s.map(l=>{if(l=Ze(l,i),l in J)return;J[l]=!0;const h=l.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!i)for(let S=u.length-1;S>=0;S--){const E=u[S];if(E.href===l&&(!h||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Qe,h||(p.as="script"),p.crossOrigin="",p.href=l,m&&p.setAttribute("nonce",m),document.head.appendChild(p),h)return new Promise((S,E)=>{p.addEventListener("load",S),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return r.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},et={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM",VITE_FIREBASE_APP_ID:"1:599375908983:web:b28b69a3770c0947063672",VITE_FIREBASE_AUTH_DOMAIN:"atemimx.firebaseapp.com",VITE_FIREBASE_CONFIG:'{"apiKey":"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM","authDomain":"atemimx.firebaseapp.com","projectId":"atemimx","storageBucket":"atemimx.firebasestorage.app","messagingSenderId":"599375908983","appId":"1:599375908983:web:b28b69a3770c0947063672"}',VITE_FIREBASE_FUNCTIONS_REGION:"us-central1",VITE_FIREBASE_MESSAGING_SENDER_ID:"599375908983",VITE_FIREBASE_PROJECT_ID:"atemimx",VITE_FIREBASE_STORAGE_BUCKET:"atemimx.firebasestorage.app",VITE_GEMINI_API_KEY:""},_=e=>{const t=et[e];if(!t)throw new Error(`Missing required environment variable: ${e}`);return t},tt={apiKey:_("VITE_FIREBASE_API_KEY"),authDomain:_("VITE_FIREBASE_AUTH_DOMAIN"),projectId:_("VITE_FIREBASE_PROJECT_ID"),storageBucket:_("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:_("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:_("VITE_FIREBASE_APP_ID")},z=Te().length?De():Oe(tt),A=Le(z),Jt=Ce(z),nt="us-central1",K=Me(z,nt),rt="rol-";function b(e){if(typeof document>"u")return;const t=document.body;t.className="",t.classList.add(`${rt}${e}`)}const ne=o.createContext(void 0),ot={admin:"direccion",direccion:"direccion",director:"direccion",docentes:"docentes",docente:"docentes",teacher:"docentes",profesor:"docentes",profesora:"docentes",prefecto:"prefectura",prefecta:"prefectura",prefect:"prefectura",prefectura:"prefectura",orientacion:"orientacion",orientadora:"orientacion",orientador:"orientacion",guidance:"orientacion",trabajo_social:"tsocial",socialwork:"tsocial",tsocial:"tsocial",social:"tsocial",medical:"enfermeria",medico:"enfermeria",medica:"enfermeria",enfermeria:"enfermeria"},st=e=>{if(typeof e!="string")return"none";const t=e.trim().toLowerCase();return ot[t]??"none"};function at(){const[e,t]=o.useState(A.currentUser),[s,i]=o.useState(()=>A.currentUser===null),[r,a]=o.useState(!1),[c,u]=o.useState(null),[g,m]=o.useState("none"),[l,h]=o.useState(null);return o.useEffect(()=>{b("none")},[]),o.useEffect(()=>{let f=!0;const I=Ve(A,async p=>{if(f){if(t(p),!p){u(null),m("none"),b("none"),h(null),i(!1),a(!1);return}i(!1),a(!0);try{const S=await Be(p,!0),E=typeof S.claims.role=="string"?S.claims.role:null,x=st(E);u(E),m(x),b(x),h(null)}catch(S){console.error("[Auth] No fue posible recuperar los claims del usuario",S),u(null),m("none"),b("none"),h("No pudimos recuperar tus permisos. Intenta volver a iniciar sesiÃ³n.")}finally{a(!1)}}});return()=>{f=!1,I(),b("none")}},[]),o.useMemo(()=>({user:e,loading:s,claimsLoading:r,role:c,visualRole:g,claimsError:l}),[e,s,r,c,g,l])}const it=({children:e})=>{const t=at();return n.jsx(ne.Provider,{value:t,children:e})},ct=()=>{const e=o.useContext(ne);if(!e)throw new Error("useAuthContext debe usarse dentro de un AuthProvider");return e},lt=()=>{const{user:e,loading:t,claimsLoading:s,role:i,visualRole:r,claimsError:a}=ct();return o.useMemo(()=>({user:e,loading:t||s,authLoading:t,claimsLoading:s,role:i,visualRole:r,claimsError:a}),[e,t,s,i,r,a])},re=(e,t)=>{if(t instanceof te){console.error(`[Auth] ${e} (code: ${t.code})`);return}console.error(`[Auth] ${e}:`,t)},dt=ke(A,Ue).catch(e=>{throw re("Failed to set persistence",e),e}),ut=e=>{if(e instanceof te)switch(e.code){case"auth/email-already-in-use":return"El correo electronico ya esta registrado.";case"auth/invalid-email":return"El formato del correo electronico no es valido.";case"auth/weak-password":return"La contrasena debe cumplir con los requisitos minimos de seguridad.";case"auth/user-not-found":case"auth/invalid-credential":return"Las credenciales ingresadas son incorrectas.";case"auth/wrong-password":return"La contrasena es incorrecta.";case"auth/too-many-requests":return"Se detectaron multiples intentos fallidos. Intenta mas tarde.";case"auth/network-request-failed":return"No se pudo establecer conexion con el servicio de autenticacion.";case"auth/configuration-not-found":return"La configuracion de autenticacion no esta disponible. Verifica las credenciales de Firebase.";case"auth/internal-error":return"El servicio de autenticacion respondio con un error interno. Intenta nuevamente.";default:return"Ocurrio un error al procesar la solicitud de autenticacion."}return"Error inesperado de autenticacion."},D=async e=>{try{return await dt,await e(A)}catch(t){throw re("Operation failed",t),new Error(ut(t))}},Qt=async(e,t)=>D(async s=>(await Fe(s,e,t)).user),Zt=async(e,t)=>D(async s=>(await Ge(s,e,t)).user),pt=async()=>{await D(async e=>{await ze(e)})},en=async e=>{await D(async t=>{await Ke(t,e)})};class ft extends w.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleReset=()=>{this.setState({hasError:!1,error:void 0})}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("[UI] Unhandled rendering error:",t,s)}render(){var t;return this.state.hasError?this.props.fallback?this.props.fallback:n.jsxs("div",{className:"error-fallback",children:[n.jsx("h2",{children:"OcurriÃ³ un problema."}),n.jsx("p",{children:((t=this.state.error)==null?void 0:t.message)??"La interfaz no pudo renderizarse correctamente."}),n.jsx("button",{type:"button",onClick:this.handleReset,children:"Reintentar"})]}):this.props.children}}const mt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM",VITE_FIREBASE_APP_ID:"1:599375908983:web:b28b69a3770c0947063672",VITE_FIREBASE_AUTH_DOMAIN:"atemimx.firebaseapp.com",VITE_FIREBASE_CONFIG:'{"apiKey":"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM","authDomain":"atemimx.firebaseapp.com","projectId":"atemimx","storageBucket":"atemimx.firebasestorage.app","messagingSenderId":"599375908983","appId":"1:599375908983:web:b28b69a3770c0947063672"}',VITE_FIREBASE_FUNCTIONS_REGION:"us-central1",VITE_FIREBASE_MESSAGING_SENDER_ID:"599375908983",VITE_FIREBASE_PROJECT_ID:"atemimx",VITE_FIREBASE_STORAGE_BUCKET:"atemimx.firebasestorage.app",VITE_GEMINI_API_KEY:""},ht=1,Q="VITE_ENCRYPTION_MASTER_KEY",Et=new TextEncoder,gt=new TextDecoder,oe=()=>{const e=typeof window<"u"?window.crypto:typeof globalThis<"u"?globalThis==null?void 0:globalThis.crypto:void 0;if(!e)throw new Error("La API de cifrado del navegador no estÃ¡ disponible.");return e},T=()=>{const e=oe();if(!e.subtle)throw new Error("El motor de cifrado no estÃ¡ disponible en este entorno.");return e.subtle},se=()=>{if(typeof globalThis>"u")return null;const e=globalThis.Buffer;return e&&typeof e.from=="function"?e:null},U=e=>{const t=e.replace(/[^A-Za-z0-9+/=]/g,"");if(typeof window<"u"&&typeof window.atob=="function"){const r=window.atob(t),a=new Uint8Array(r.length);for(let c=0;c<r.length;c+=1)a[c]=r.charCodeAt(c);return a}const s=se();if(!s)throw new Error("El entorno actual no soporta decodificaciÃ³n Base64.");const i=s.from(t,"base64");return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)},Z=e=>{const t=e instanceof Uint8Array?e:new Uint8Array(e);if(typeof window<"u"&&typeof window.btoa=="function"){let i="";return t.forEach(r=>{i+=String.fromCharCode(r)}),window.btoa(i)}const s=se();if(!s)throw new Error("El entorno actual no soporta codificaciÃ³n Base64.");return s.from(t).toString("base64")},St=(()=>{let e=null;return t=>{if(t)return T().importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"]);if(!e){const s=mt[Q];if(!s)throw new Error(`Falta la variable de entorno ${Q} para habilitar el cifrado.`);const i=U(s.trim());e=T().importKey("raw",i,"AES-GCM",!1,["encrypt","decrypt"])}return e}})(),ae=e=>St(),wt=()=>{const e=new Uint8Array(12);return oe().getRandomValues(e),e},yt=async(e,t)=>{const s=await ae(),i=wt(),r=Et.encode(e),a=await T().encrypt({name:"AES-GCM",iv:i},s,r);return{version:ht,iv:Z(i),ciphertext:Z(a)}},_t=async(e,t)=>{if(!(e!=null&&e.iv)||!(e!=null&&e.ciphertext))throw new Error("El payload cifrado es invÃ¡lido.");const s=await ae(),i=U(e.iv),r=U(e.ciphertext),a=await T().decrypt({name:"AES-GCM",iv:i},s,r);return gt.decode(a)},It=async(e,t)=>yt(JSON.stringify(e)),tn=async(e,t)=>{const s=await _t(e);return JSON.parse(s)},bt=G(K,"saveEncryptedReport");G(K,"getEncryptedReports");G(K,"deleteEncryptedReport");const At=e=>{if(e){const t=Date.parse(e);if(!Number.isNaN(t))return new Date(t).toISOString()}return new Date().toISOString()},xt=e=>{const t=Date.parse(e);if(Number.isNaN(t))return e;try{return new Intl.DateTimeFormat("es-MX",{dateStyle:"medium",timeStyle:"short"}).format(new Date(t))}catch{return new Date(t).toLocaleString("es-MX")}},Pt=async e=>{const t=At(e.date);try{const s=await It({...e,date:t}),i=await bt({payload:s,recordedAtISO:t}),r=xt(t);return{...e,id:i.data.reportId,date:t,displayDate:r}}catch(s){throw console.error("[GuardianReports] No se pudo guardar el reporte cifrado",s),new Error("No se pudo guardar el reporte de Ãngel GuardiÃ¡n. Intenta nuevamente.")}},vt=w.lazy(()=>y(()=>import("./AdminPanel-C6m41vBa.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),Rt=w.lazy(()=>y(()=>import("./Sase310Module-CN1Vf2U1.js"),__vite__mapDeps([5,1,2,4,3,6]),import.meta.url)),Nt=w.lazy(()=>y(()=>import("./Sidebar-CxeLwP5y.js"),__vite__mapDeps([7,1,2]),import.meta.url)),jt=w.lazy(()=>y(()=>import("./AtemiDashboard-DhK_34lr.js").then(e=>e.y),__vite__mapDeps([8,1,2]),import.meta.url)),Tt=w.lazy(()=>y(()=>import("./GlobalMenuModal-DolNhYuY.js"),__vite__mapDeps([9,1,2]),import.meta.url)),Dt=w.lazy(()=>y(()=>import("./PinPreferencesModal-DDNwYV8g.js"),__vite__mapDeps([10,1,2]),import.meta.url)),Ot=w.lazy(()=>y(()=>import("./SecurityPinScreen-CeaOoImb.js"),__vite__mapDeps([11,1,2]),import.meta.url)),Lt=w.lazy(()=>y(()=>import("./IdeaIntro-ZEzejWem.js"),__vite__mapDeps([12,1,2]),import.meta.url)),Ct=w.lazy(()=>y(()=>import("./AngelGuardianModal-CHck2nwC.js"),__vite__mapDeps([13,1,2]),import.meta.url)),Mt=w.lazy(()=>y(()=>import("./AngelGuardianFab-MgP4xA0v.js"),__vite__mapDeps([14,1,2]),import.meta.url)),Vt=()=>"menu",Bt=e=>e==="sase310"?"/sase310":e==="admin"?"/sase310/admin":"/",kt=()=>{const{user:e,loading:t,claimsLoading:s,role:i,claimsError:r}=lt(),[a,c]=o.useState(()=>Vt()),[u,g]=o.useState(!1),[m,l]=o.useState(null),[h,f]=o.useState(!1),[I,p]=o.useState("unlock"),[S,E]=o.useState(null),[x,P]=o.useState(!1),[ie,ce]=o.useState(!0),[le,de]=o.useState(!0),[ue,v]=o.useState(!1),[pe,O]=o.useState(!1),[H,L]=o.useState(null),[C,M]=o.useState(!1),[fe,V]=o.useState(!1),X=t||s,B="atemi:pinEnabled",k="atemi:pinValue";o.useEffect(()=>{if(!m)return;const d=window.setTimeout(()=>l(null),4e3);return()=>window.clearTimeout(d)},[m]),o.useEffect(()=>{r&&l(r)},[r]),o.useEffect(()=>{if(typeof window>"u")return;const d=window.localStorage.getItem(B)==="true",j=window.localStorage.getItem(k);d&&j&&(O(!0),L(j),M(!0))},[]),o.useEffect(()=>{C&&(p("unlock"),E(null),f(!0))},[C]),o.useEffect(()=>{if(typeof window>"u")return;if(!e){c("menu"),window.location.pathname!=="/"&&window.history.replaceState({},"","/");return}const d=window.location.pathname;if(d.startsWith("/sase310/admin")){c("admin");return}if(d.startsWith("/sase310")){c("sase310");return}c("menu")},[e]),o.useEffect(()=>{if(typeof window>"u")return;const d=Bt(a);window.location.pathname!==d&&window.history.replaceState({},"",d)},[a]),o.useEffect(()=>{if(typeof window>"u"||!X)return;const j=window.setTimeout(()=>{l(ve=>ve??"No pudimos confirmar la sesion. Intenta iniciar sesion desde el modulo SASE-310.")},15e3);return()=>window.clearTimeout(j)},[X]),o.useEffect(()=>{!e&&(a==="admin"||a==="sase310")&&c("menu")},[e,a]);const F=o.useMemo(()=>(i??"").toLowerCase()==="admin",[i]),q=a==="menu",R=()=>{c("menu"),typeof window<"u"&&window.history.replaceState({},"","/")},me=()=>{c("menu"),typeof window<"u"&&window.history.replaceState({},"","/")},W=()=>{c("sase310"),typeof window<"u"&&window.history.replaceState({},"","/sase310")},he=()=>{if(!F){l("No cuentas con permisos de administraciÃ¯Â¿Â½n para acceder a esta secciÃ¯Â¿Â½n."),R();return}c("admin"),typeof window<"u"&&window.history.replaceState({},"","/sase310/admin")},Ee=()=>{l("Consulta la documentacion AtemiMX o contacta al equipo para asistencia.")},ge=()=>{l("La configuracion personalizada estara disponible proximamente.")},Se=d=>{if(I==="setup"){typeof window<"u"&&(window.localStorage.setItem(k,d),window.localStorage.setItem(B,"true")),L(d),O(!0),E(null),f(!1),p("unlock"),l("PIN configurado correctamente.");return}if(H&&d===H){M(!1),f(!1),E(null);return}E("PIN incorrecto. Intenta nuevamente.")},we=()=>{typeof window<"u"&&(window.localStorage.removeItem(k),window.localStorage.removeItem(B)),L(null),O(!1),M(!1),v(!1),l("PIN desactivado.")},ye=()=>{v(!1),p("setup"),E(null),f(!0)},_e=()=>{P(!0)},Ie=()=>{ce(d=>!d)},be=()=>{v(!0)},Y=async()=>{if(!u)try{g(!0),await pt(),l("Sesion finalizada correctamente.")}catch(d){console.error("[UI] Error al cerrar sesion",d),l("No fue posible cerrar sesion. Intenta nuevamente.")}finally{g(!1),R()}},$=d=>n.jsxs("section",{className:"empty-state",children:[n.jsx("p",{className:"empty-state__eyebrow",children:"AtemiMX"}),n.jsx("h2",{children:d}),n.jsx("p",{children:"Usa el menÃº lateral para abrir mÃ³dulos o lanzar el menÃº flotante."})]}),N=d=>n.jsx("div",{className:"app-shell__loader",role:"status","aria-live":"polite",children:d}),Ae=()=>a==="none"?$("Elige un mÃ³dulo para comenzar"):a==="admin"?!e||!F?n.jsxs("section",{className:"card",children:[n.jsx("h2",{className:"text-lg font-display text-white",children:"Acceso restringido"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Necesitas permisos de administraciÃ³n para ingresar a este panel."})]}):n.jsx(o.Suspense,{fallback:N("Abriendo panel administrativo..."),children:n.jsx(vt,{})}):a==="sase310"?n.jsx(o.Suspense,{fallback:N("Cargando mÃ³dulo SASE-310..."),children:n.jsx(Rt,{onNavigateHome:R})}):$("Panel principal disponible desde el menÃº general"),xe=()=>n.jsx("div",{className:"app-shell__layer",children:n.jsxs("div",{className:"app-shell__layout",children:[n.jsx(o.Suspense,{fallback:N("Cargando navegaciÃ³n principal..."),children:n.jsx(Nt,{activeView:a,hasSession:!!e,logoutPending:u,onSelectHome:R,onResetView:me,onSelectSase:W,onSelectAdmin:he,onOpenHelp:Ee,onOpenSettings:ge,onLogout:Y,canAccessAdmin:!!(e&&F),onOpenLauncher:_e,onToggleCollapse:Ie,isCollapsed:ie})}),n.jsxs("main",{className:"app-shell__main",children:[m?n.jsx("div",{className:"app-shell__notice",children:m}):null,n.jsx(ft,{children:n.jsx("div",{className:"app-shell__content",children:Ae()})})]})]})}),Pe=()=>n.jsxs("div",{className:"dashboard-wrapper",children:[m?n.jsx("div",{className:"app-shell__notice dashboard-wrapper__notice",children:m}):null,n.jsx(o.Suspense,{fallback:N("Cargando panel AtemiMX..."),children:n.jsx(jt,{user:e,role:i??null,onLogout:Y})})]});return n.jsxs("div",{className:`app-shell${q?" app-shell--dashboard":""}`,children:[q?Pe():xe(),e?n.jsx(o.Suspense,{fallback:null,children:n.jsx(Mt,{onOpen:()=>V(!0)})}):null,n.jsx(o.Suspense,{fallback:null,children:n.jsx(Ot,{open:h,mode:I,errorMessage:S,onCancel:()=>{f(!1),C&&f(!0)},onSubmit:Se})}),n.jsx(o.Suspense,{fallback:null,children:n.jsx(Tt,{open:x,onClose:()=>P(!1),onOpenSase:()=>{P(!1),W()},onShowSecurity:()=>{P(!1),be()},variant:"floating",user:e})}),n.jsx(o.Suspense,{fallback:null,children:n.jsx(Dt,{open:ue,pinEnabled:pe,onRequestSetup:ye,onDisable:we,onClose:()=>v(!1)})}),fe?n.jsx(o.Suspense,{fallback:null,children:n.jsx(Ct,{onClose:()=>V(!1),onSaveReport:Pt,onSaved:()=>V(!1)})}):null,le?n.jsx(o.Suspense,{fallback:null,children:n.jsx(Lt,{onStart:()=>de(!1)})}):null]})};function Ft(){return n.jsxs(n.Fragment,{children:[n.jsx(Je,{}),n.jsx($e,{}),n.jsx(kt,{})]})}const Ut=[{label:"Aviso de Privacidad",emoji:"ðŸ“˜",href:"https://docs.google.com/document/d/1fofju9x-kRUH2zU1S9LllmxPiTqQ3HcwbLVCPUhBcNM/edit?usp=sharing"},{label:"TÃ©rminos de Uso",emoji:"âš–ï¸",href:"https://docs.google.com/document/d/1Vo1o8ew31LPTwHrX1y41hklHtowaIQtMEBr0WPDdZHA/edit?usp=drive_link"},{label:"Protocolo Ãngel GuardiÃ¡n",emoji:"ðŸŽ¤",href:"https://docs.google.com/document/d/1XlAIXN__SLEmX-3Dyhjig7RTZu5W3amtSfKkQCWF6uw/edit?usp=drive_link"}],Gt={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at top, rgba(0, 191, 255, 0.15), transparent 55%)",padding:"24px"},zt={maxWidth:"640px",width:"100%",backgroundColor:"rgba(12, 21, 40, 0.92)",border:"1px solid rgba(0, 191, 255, 0.3)",borderRadius:"18px",padding:"32px",boxShadow:"0 20px 45px rgba(0, 0, 0, 0.35)",color:"#ecf6ff",fontFamily:'"Montserrat","Inter",system-ui,sans-serif'},Kt={listStyle:"none",padding:0,margin:"20px 0",display:"flex",flexDirection:"column",gap:"12px"},Ht={width:"100%",padding:"14px 18px",borderRadius:"999px",border:"none",fontSize:"1rem",fontWeight:600,cursor:"pointer",background:"linear-gradient(120deg, rgba(0, 191, 255, 0.95), rgba(255, 51, 102, 0.95))",color:"#04101f",transition:"opacity 0.2s ease"},Xt=({onAccept:e})=>{const[t,s]=o.useState(!1),i=o.useMemo(()=>Ut.map(r=>n.jsx("li",{children:n.jsxs("a",{href:r.href,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"10px",textDecoration:"none",color:"#a8e1ff",fontWeight:500},children:[n.jsx("span",{"aria-hidden":"true",role:"img",children:r.emoji}),n.jsx("span",{children:r.label})]})},r.href)),[]);return n.jsx("div",{style:Gt,children:n.jsxs("section",{style:zt,"aria-labelledby":"legal-consent-title",children:[n.jsx("h2",{id:"legal-consent-title",style:{fontSize:"1.6rem",marginBottom:"12px"},children:"Condiciones de Uso y Privacidad"}),n.jsxs("p",{style:{color:"#c7d9ec",lineHeight:1.5},children:["Antes de usar AtemiMX, revisa los documentos oficiales del"," ",n.jsx("strong",{children:"Proyecto AtemiMX Â· Piloto Docente 2025â€“2026"}),"."]}),n.jsx("ul",{style:Kt,children:i}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[n.jsx("input",{id:"acceptLegal",type:"checkbox",checked:t,onChange:r=>s(r.target.checked)}),n.jsx("span",{children:"He leÃ­do y acepto los documentos anteriores."})]}),n.jsx("button",{id:"continueApp",type:"button",disabled:!t,style:{...Ht,marginTop:"24px",opacity:t?1:.4,cursor:t?"pointer":"not-allowed"},onClick:e,children:"Continuar"})]})})},ee="atemi:legalConsent:v1",qt=()=>{const[e,t]=o.useState(()=>typeof window>"u"?!0:window.localStorage.getItem(ee)==="accepted");return o.useEffect(()=>{e&&typeof window<"u"&&window.localStorage.setItem(ee,"accepted")},[e]),e?n.jsx(it,{children:n.jsx(Ft,{})}):n.jsx(Xt,{onAccept:()=>t(!0)})};Re.createRoot(document.getElementById("root")).render(n.jsx(w.StrictMode,{children:n.jsx(qt,{})}));export{y as _,A as a,pt as b,Qt as c,Jt as d,tn as e,K as f,It as g,Zt as l,en as r,lt as u};
