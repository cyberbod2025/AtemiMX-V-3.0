const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TeacherDashboardView-Ii4KrC-3.js","./react-vendor-BmwAAf7d.js","./vendor-mpNZlVBn.js","./ReportForm-Cl-rj-Rg.js","./geminiService-Ce1TecKi.js","./ReportCard-Bb6UXYeS.js","./firebase-hPZi0YyP.js","./GuidanceInboxView-B0T0ZTII.js","./StudentProfileView-49R24dLd.js","./AdminDashboardView-CCt0sVd2.js","./LiveAssistantView-BkFBzRyV.js","./PrefectureDashboardView-Bv6hGi5F.js","./TutorDashboardView-DVvoQhHd.js","./MobileTeacherView-uLRi8ZWg.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,C as ht,d as Na,e as Sa,S as Ea,L as ft,f as Aa,N as xt,h as gt,B as bt,i as _a,k as yt,A as jt,l as wt,G as vt,m as Nt,X as Ia,n as St,o as Et,M as At,p as _t,q as It,U as Ct,s as Rt,t as Pt,u as kt,F as Mt,K as He,v as zt}from"./react-vendor-BmwAAf7d.js";import{A as Tt,m as Lt,a as Fe,s as _,i as ea,b as Ca,Z as Dt}from"./vendor-mpNZlVBn.js";import{g as Ot,a as Vt,i as Ft,b as Bt,c as Ut,d as Gt,o as $t,e as qt,s as Ht,F as ce,f as Wt,h as Xt,j as Kt,k as Yt,l as Jt,T as R,m as D,n as Ra,p as Qt,q as Ne,r as ra,w as na,t as Be,u as Pa,v as Zt,x as ka,y as es,E as as,z as ts,A as ss,B as rs}from"./firebase-hPZi0YyP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const ns=""+new URL("atemi-startup-Ch2NV5O7.mp3",import.meta.url).href,is=1.5,os=.35,ls=.12,cs=1e3;function ds(){const[a,t]=i.useState(()=>Date.now()),r=i.useRef(null);i.useEffect(()=>{if(typeof Audio>"u")return;const s=new Audio(ns);return r.current=s,()=>{s.pause(),r.current=null}},[]);const n=i.useCallback(()=>{const s=r.current;if(!s)return;s.pause(),s.currentTime=0,s.volume=os;const o=s.play();typeof(o==null?void 0:o.then)=="function"&&o.then(()=>{window.setTimeout(()=>{s.paused||(s.volume=ls)},cs)}).catch(()=>{})},[]);return i.useEffect(()=>{if(typeof document>"u")return;const s=new MutationObserver(()=>{t(Date.now()),n()});return s.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>s.disconnect()},[n]),e.jsx(Tt,{children:e.jsx(Lt.div,{className:"role-glow",initial:{opacity:0,scale:1.05},animate:{opacity:.35,scale:1},exit:{opacity:0,scale:1},transition:{duration:is,ease:"easeInOut"}},a)})}function us(){return e.jsxs("div",{className:"atemi-bg","aria-hidden":"true",children:[e.jsx("div",{className:"atemi-layer atemi-gradient"}),e.jsx("div",{className:"atemi-layer atemi-lines"}),e.jsx("div",{className:"atemi-overlay"})]})}const ms={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM",VITE_FIREBASE_APP_ID:"1:599375908983:web:b28b69a3770c0947063672",VITE_FIREBASE_AUTH_DOMAIN:"atemimx.firebaseapp.com",VITE_FIREBASE_CONFIG:'{"apiKey":"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM","authDomain":"atemimx.firebaseapp.com","projectId":"atemimx","storageBucket":"atemimx.firebasestorage.app","messagingSenderId":"599375908983","appId":"1:599375908983:web:b28b69a3770c0947063672"}',VITE_FIREBASE_FUNCTIONS_REGION:"us-central1",VITE_FIREBASE_MESSAGING_SENDER_ID:"599375908983",VITE_FIREBASE_PROJECT_ID:"atemimx",VITE_FIREBASE_STORAGE_BUCKET:"atemimx.firebasestorage.app",VITE_GEMINI_API_KEY:""},re=a=>{const t=ms[a];if(!t)throw new Error(`Missing required environment variable: ${a}`);return t},ps={apiKey:re("VITE_FIREBASE_API_KEY"),authDomain:re("VITE_FIREBASE_AUTH_DOMAIN"),projectId:re("VITE_FIREBASE_PROJECT_ID"),storageBucket:re("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:re("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:re("VITE_FIREBASE_APP_ID")},ia=Ot().length?Vt():Ft(ps),T=Bt(ia),C=Ut(ia),hs="us-central1",fs=Gt(ia,hs),xs="rol-";function ve(a){if(typeof document>"u")return;const t=document.body;t.className="",t.classList.add(`${xs}${a}`)}const Ma=i.createContext(void 0),gs={admin:"direccion",direccion:"direccion",director:"direccion",docentes:"docentes",docente:"docentes",teacher:"docentes",profesor:"docentes",profesora:"docentes",prefecto:"prefectura",prefecta:"prefectura",prefect:"prefectura",prefectura:"prefectura",orientacion:"orientacion",orientadora:"orientacion",orientador:"orientacion",guidance:"orientacion",trabajo_social:"tsocial",socialwork:"tsocial",tsocial:"tsocial",social:"tsocial",medical:"enfermeria",medico:"enfermeria",medica:"enfermeria",enfermeria:"enfermeria"},bs=a=>{if(typeof a!="string")return"none";const t=a.trim().toLowerCase();return gs[t]??"none"};function ys(){const[a,t]=i.useState(T.currentUser),[r,n]=i.useState(()=>T.currentUser===null),[s,o]=i.useState(!1),[l,c]=i.useState(null),[m,p]=i.useState("none"),[d,x]=i.useState(null);return i.useEffect(()=>{ve("none")},[]),i.useEffect(()=>{let b=!0;const g=$t(T,async f=>{if(b){if(t(f),!f){c(null),p("none"),ve("none"),x(null),n(!1),o(!1);return}n(!1),o(!0);try{const y=await qt(f,!0),v=typeof y.claims.role=="string"?y.claims.role:null,u=bs(v);c(v),p(u),ve(u),x(null)}catch(y){console.error("[Auth] No fue posible recuperar los claims del usuario",y),c(null),p("none"),ve("none"),x("No pudimos recuperar tus permisos. Intenta volver a iniciar sesión.")}finally{o(!1)}}});return()=>{b=!1,g(),ve("none")}},[]),i.useMemo(()=>({user:a,loading:r,claimsLoading:s,role:l,visualRole:m,claimsError:d}),[a,r,s,l,m,d])}const js=({children:a})=>{const t=ys();return e.jsx(Ma.Provider,{value:t,children:a})},ws=()=>{const a=i.useContext(Ma);if(!a)throw new Error("useAuthContext debe usarse dentro de un AuthProvider");return a},za=()=>{const{user:a,loading:t,claimsLoading:r,role:n,visualRole:s,claimsError:o}=ws();return i.useMemo(()=>({user:a,loading:t||r,authLoading:t,claimsLoading:r,role:n,visualRole:s,claimsError:o}),[a,t,r,n,s,o])},Ta=(a,t)=>{if(t instanceof ce){console.error(`[Auth] ${a} (code: ${t.code})`);return}console.error(`[Auth] ${a}:`,t)},vs=Ht(T,Wt).catch(a=>{throw Ta("Failed to set persistence",a),a}),Ns=a=>{if(a instanceof ce)switch(a.code){case"auth/email-already-in-use":return"El correo electronico ya esta registrado.";case"auth/invalid-email":return"El formato del correo electronico no es valido.";case"auth/weak-password":return"La contrasena debe cumplir con los requisitos minimos de seguridad.";case"auth/user-not-found":case"auth/invalid-credential":return"Las credenciales ingresadas son incorrectas.";case"auth/wrong-password":return"La contrasena es incorrecta.";case"auth/too-many-requests":return"Se detectaron multiples intentos fallidos. Intenta mas tarde.";case"auth/network-request-failed":return"No se pudo establecer conexion con el servicio de autenticacion.";case"auth/configuration-not-found":return"La configuracion de autenticacion no esta disponible. Verifica las credenciales de Firebase.";case"auth/internal-error":return"El servicio de autenticacion respondio con un error interno. Intenta nuevamente.";default:return"Ocurrio un error al procesar la solicitud de autenticacion."}return"Error inesperado de autenticacion."},Ue=async a=>{try{return await vs,await a(T)}catch(t){throw Ta("Operation failed",t),new Error(Ns(t))}},Ss=async(a,t)=>Ue(async r=>(await Yt(r,a,t)).user),Es=async(a,t)=>Ue(async r=>(await Xt(r,a,t)).user),La=async()=>{await Ue(async a=>{await Jt(a)})},As=async a=>{await Ue(async t=>{await Kt(t,a)})},Se="users",Da="docentes",Oe="plantilla_docente",_s={admin:"admin",direccion:"admin",director:"admin",clerk:"clerk",secretaria:"clerk",secretary:"clerk",teacher:"teacher",docente:"teacher",profesor:"teacher",profesora:"teacher",prefect:"prefect",prefecto:"prefect",prefectura:"prefect",medical:"medical",medico:"medical",doctora:"medical",socialwork:"socialWork",trabajo_social:"socialWork",social:"socialWork",guidance:"guidance",orientacion:"guidance",orientadora:"guidance"},Oa=a=>{const t=a.trim().toLowerCase();return _s[t]??"teacher"},ua={clerk:"Secretaria",teacher:"Docente",prefect:"Prefectura",medical:"Servicio Medico",socialWork:"Trabajo Social",guidance:"Orientacion",admin:"Direccion"},Is=Fe({email:_().email(),nombreCompleto:_().min(3).max(140).optional(),nombreNormalizado:_().min(3).max(140).optional(),rol:_().min(3).max(40),autorizado:Ca(),fechaRegistro:ea(R).optional(),autorizadoPor:_().nullable().optional(),plantillaDocenteId:_().optional()}),Cs=Fe({nombre:_().min(3).max(120),plantel:_().min(2).max(80),extension:_().min(1).max(10).optional(),createdAt:ea(R).optional(),updatedAt:ea(R).optional()}),Rs=Fe({nombre_completo:_().min(3).max(140),registrado:Ca(),uid_asociado:_().nullable(),rol:_().min(3).max(40),rol_canonico:_().min(3).max(40).optional()}),Va=a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z\s]/g," ").trim().replace(/\s+/g," ").toUpperCase(),Ps=a=>a.replace(/\s+/g,"_"),Fa=a=>{const t=a.trim().replace(/\s+/g," ");return t?t.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):""},Ge=a=>{if(!a.exists())return null;const t=Is.safeParse(a.data());if(!t.success)return console.error("[SASE-310] Perfil de usuario invalido:",t.error),null;const r=t.data,n=Oa(r.rol),s=r.nombreCompleto??Fa(a.get("nombre")??""),o=r.nombreNormalizado??Va(s||r.email);return{id:a.id,...r,rol:n,nombreCompleto:s||r.email,nombreNormalizado:o,fechaRegistro:r.fechaRegistro??R.now(),autorizadoPor:r.autorizadoPor??null}},ks=a=>{if(!a.exists())return null;const t=Cs.safeParse(a.data());if(!t.success)return console.error("[SASE-310] Datos docentes invalidos:",t.error),null;const r=t.data;return{id:a.id,...r,createdAt:r.createdAt??R.now(),updatedAt:r.updatedAt??R.now()}},aa=a=>{if(!a.exists())return null;const t=Rs.safeParse(a.data());if(!t.success)return console.error("[SASE-310] Entrada de plantilla invalida:",t.error),null;const r=t.data,n=Oa(r.rol_canonico??r.rol),{rol_canonico:s=void 0,...o}=r;return{id:a.id,...o,rol:n}},$e=(a,t)=>{throw t instanceof ce?console.error(`[SASE-310] ${a} (code: ${t.code})`):console.error(`[SASE-310] ${a}:`,t),new Error("No se pudo completar la operacion solicitada. Intenta mas tarde.")},Ms=async a=>{const t=Ps(a),r=D(C,Oe,t);try{const n=await ka(r),s=aa(n);if(s)return s}catch(n){if(n instanceof ce&&n.code!=="permission-denied"||!(n instanceof ce))throw n}try{const n=Ne(C,Oe),s=ra(n,na("nombre_completo","==",a)),l=(await Be(s)).docs[0];return l?aa(l):null}catch(n){throw n instanceof ce&&n.code==="permission-denied"?new Error("No fue posible validar la plantilla de docentes. Contacta al administrador."):n}},zs=async a=>{var t;try{await a.delete()}catch(r){console.error(`[SASE-310] No se pudo revertir el usuario ${a.uid}:`,r)}finally{((t=T.currentUser)==null?void 0:t.uid)===a.uid&&await T.signOut().catch(()=>{})}},Ts=async a=>{const t=Fa(a.nombreCompleto),r=Va(a.nombreCompleto),n=a.email.trim().toLowerCase();if(!t||!r)throw new Error("Ingresa tu nombre completo tal como aparece en la plantilla autorizada.");let s=null;try{s=await Ss(n,a.password),await Zt(s,{displayName:t}).catch(()=>{});const o=await Ms(r);if(!o)throw new Error("No fue posible validar la plantilla autorizada. Contacta al administrador.");if(o.registrado&&(!o.uid_asociado||o.uid_asociado!==s.uid))throw new Error("Este docente ya cuenta con un registro activo.");const l=R.now(),c=o.rol,m={email:n,nombreCompleto:t,nombreNormalizado:r,rol:c,autorizado:!0,fechaRegistro:l,autorizadoPor:null,plantillaDocenteId:o.id},p=D(C,Oe,o.id),d=D(C,Se,s.uid);await Pa(C,async b=>{const g=await b.get(p),f=aa(g);if(!f)throw new Error("La plantilla de docentes no se encuentra disponible.");if(f.registrado&&(!f.uid_asociado||f.uid_asociado!==s.uid))throw new Error("Este docente ya se autorizo previamente.");b.set(d,m,{merge:!0}),b.update(p,{registrado:!0,uid_asociado:s.uid,correo_registrado:n,actualizado_en:l,rol_canonico:c})});const x={id:s.uid,...m};return{user:s,profile:x}}catch(o){throw s&&await zs(s),o instanceof Error?o:new Error("No fue posible completar el registro con la whitelist.")}},Ls=async(a,t)=>{const r=await Ds(a);if(r)return r;throw new Error("Tu cuenta no esta autorizada en SASE-310. Contacta al administrador.")},Ds=async a=>{const t=D(C,Se,a);try{const r=await ka(t);return Ge(r)}catch(r){return $e("Recuperacion de perfil fallida",r)}},Os=(a,t,r)=>{const n=D(C,Se,a);return Ra(n,s=>{t(Ge(s))},s=>{console.error("[SASE-310] Observador de perfil fallido:",s),r==null||r(s)})},Vs=async()=>{try{const a=Ne(C,Se),t=ra(a,na("autorizado","==",!1));return(await Be(t)).docs.map(n=>Ge(n)).filter(n=>n!==null).sort((n,s)=>s.fechaRegistro.toMillis()-n.fechaRegistro.toMillis())}catch(a){return $e("Listado de usuarios pendientes fallido",a)}},Fs=async(a,t)=>{var o,l;const r=D(C,Se,a),n=((o=T.currentUser)==null?void 0:o.email)??((l=T.currentUser)==null?void 0:l.uid)??null,s=R.now();try{await Pa(C,async c=>{const m=await c.get(r),p=Ge(m);if(!p)throw new Error("No se encontró el perfil del usuario a aprobar.");if(c.update(r,{autorizado:!0,rol:t,autorizadoPor:n,fechaAutorizacion:s}),p.plantillaDocenteId){const d=D(C,Oe,p.plantillaDocenteId);c.update(d,{registrado:!0,uid_asociado:a,autorizado_en:s,autorizado_por:n})}})}catch(c){$e("Aprobacion de usuario fallida",c)}},Bs=(a,t,r)=>{const n=D(C,Da,a);return Ra(n,s=>{t(ks(s))},s=>{console.error("[SASE-310] Observador de datos docentes fallido:",s),r==null||r(s)})},ma=async(a,t)=>{const r=D(C,Da,a);try{const n={...t,createdAt:t.createdAt??R.now(),updatedAt:R.now()};await Qt(r,n,{merge:!0})}catch(n){$e("Registro de datos docentes fallido",n)}},Us=()=>{const[a,t]=i.useState([]),[r,n]=i.useState(!0),[s,o]=i.useState(null),l=i.useCallback(async()=>{n(!0),o(null);try{const m=await Vs();t(m)}catch(m){console.error("[Auth2.0] No fue posible cargar los usuarios pendientes:",m),o(m instanceof Error?m.message:"No se pudieron obtener los usuarios pendientes.")}finally{n(!1)}},[]);i.useEffect(()=>{l()},[l]);const c=i.useCallback(async(m,p)=>{try{await Fs(m,p),await l()}catch(d){throw console.error("[Auth2.0] No fue posible aprobar al usuario:",d),o(d instanceof Error?d.message:"Ocurrio un error al aprobar al usuario."),d}},[l]);return{pending:a,loading:r,error:s,approve:c,refresh:l}},oa=[{value:"teacher",label:"Docente"},{value:"guidance",label:"Orientacion"},{value:"prefect",label:"Prefectura"},{value:"medical",label:"Servicio Medico"},{value:"socialWork",label:"Trabajo Social"},{value:"clerk",label:"Secretaria"}],Gs=a=>{if(a==="admin")return"Direccion";const t=oa.find(r=>r.value===a);return(t==null?void 0:t.label)??a},$s=a=>a.rol==="admin"?"teacher":oa.some(t=>t.value===a.rol)?a.rol:"teacher",qs=({onRefreshRequested:a})=>{const{pending:t,loading:r,error:n,approve:s,refresh:o}=Us(),[l,c]=i.useState({}),[m,p]=i.useState(null),[d,x]=i.useState(null),b=(u,S)=>{c(N=>({...N,[u]:S}))},g=u=>l[u.id]??$s(u),f=async u=>{const S=g(u);p(u.id),x(null);try{await s(u.id,S),x(`Usuario ${u.email} aprobado como ${Gs(S)}.`),c(N=>{const P={...N};return delete P[u.id],P}),a==null||a()}catch(N){console.error("[AdminPanel] Error al aprobar usuario:",N)}finally{p(null)}},y=async()=>{x(null),await o()},v=i.useMemo(()=>t.slice().sort((u,S)=>u.fechaRegistro&&S.fechaRegistro?S.fechaRegistro.toMillis()-u.fechaRegistro.toMillis():u.email.localeCompare(S.email)),[t]);return e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-display text-white",children:"Panel de aprobación"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Autoriza cuentas docentes y asigna el rol operativo correspondiente."})]}),e.jsx("button",{type:"button",className:"btn btn-secondary sm:w-auto w-full",onClick:y,disabled:r,children:r?"Actualizando...":"Actualizar lista"})]}),n?e.jsx("p",{className:"text-sm text-red-400",children:n}):null,d?e.jsx("p",{className:"text-sm text-emerald-400",children:d}):null,e.jsxs("div",{className:"card",children:[r?e.jsx("p",{className:"text-sm text-gray-400",children:"Cargando usuarios pendientes..."}):null,!r&&v.length===0?e.jsx("p",{className:"text-sm text-gray-400",children:"No hay usuarios pendientes por autorizar."}):null,e.jsx("ul",{className:"space-y-4",children:v.map(u=>{const S=g(u);return e.jsx("li",{className:"bg-black/30 border border-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-white",children:u.nombreCompleto}),e.jsx("p",{className:"text-sm text-gray-400",children:u.email}),u.fechaRegistro?e.jsxs("p",{className:"text-xs text-gray-500",children:["Registrado: ",u.fechaRegistro.toDate().toLocaleString()]}):null]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center",children:[e.jsxs("label",{className:"text-sm text-gray-300",children:["Rol asignado",e.jsx("select",{className:"input-field mt-1 w-full",value:S,onChange:N=>b(u.id,N.target.value),disabled:m===u.id,children:oa.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))})]}),e.jsx("button",{type:"button",className:"btn btn-primary sm:w-auto w-full",onClick:()=>void f(u),disabled:m===u.id,children:m===u.id?"Aprobando...":"Aprobar"})]})]})},u.id)})})]})]})},Hs="/branding/superio al panel.png",le={key:"general",label:"AtemiMX · SASE-310",image:Hs,caption:"Arquitectura S-SDLC"},Ws={teacher:{key:"teacher",label:"Atem · Docentes",image:"/branding/docentes.png"},admin:{key:"admin",label:"Atem · Dirección",image:"/branding/direccion.png"},guidance:{key:"guidance",label:"Atem · Orientación",image:"/branding/orientacion.png"},socialWork:{key:"socialWork",label:"Atem · Trabajo Social",image:"/branding/t social.png"},prefect:{key:"prefect",label:"Atem · Prefectura",image:"/branding/prefectura.png"},medical:{key:"medical",label:"Atem · Enfermería",image:"/branding/enfermeria.png"},clerk:{key:"clerk",label:"Atem · Secretaría",image:"/branding/direccion.png"}},Xs=a=>a?Ws[a]??le:le,Ks="El sistema transforma tu nombre a mayusculas para que coincida con la plantilla autorizada.",We={status:"idle"},Xe=a=>a==="valid"?"input-field input-field--success":a==="error"?"input-field input-field--error":"input-field",Ke=a=>a==="valid"?e.jsx(ht,{size:18,className:"input-status__icon input-status__icon--valid","aria-hidden":!0}):a==="error"?e.jsx(Na,{size:18,className:"input-status__icon input-status__icon--error","aria-hidden":!0}):null,pa=(a,t)=>a.status==="error"&&a.message?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"field-feedback field-feedback--error",children:a.message}),t?e.jsx("p",{className:"field-feedback field-feedback--muted",children:t}):null]}):a.status==="valid"&&a.message?e.jsx("p",{className:"field-feedback field-feedback--success",children:a.message}):t?e.jsx("p",{className:"field-feedback field-feedback--muted",children:t}):null,Ys=({values:a,submitting:t=!1,serverError:r=null,passwordHint:n,validation:s,canSubmit:o=!0,onChange:l,onSubmit:c,onCancel:m})=>{const p=(s==null?void 0:s.nombreCompleto)??We,d=(s==null?void 0:s.email)??We,x=(s==null?void 0:s.password)??We;return e.jsxs("form",{className:"space-y-4",onSubmit:c,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"register-full-name",children:"Nombre completo"}),e.jsxs("div",{className:"input-status",children:[e.jsx("input",{id:"register-full-name",type:"text",className:Xe(p.status),placeholder:"Ej. HUGO SANCHEZ RESENDIZ",autoComplete:"name",value:a.nombreCompleto,onChange:b=>l("nombreCompleto",b.target.value.toUpperCase()),disabled:t,required:!0}),Ke(p.status)]}),pa(p,Ks)]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"register-email",children:"Correo institucional"}),e.jsxs("div",{className:"input-status",children:[e.jsx("input",{id:"register-email",type:"email",className:Xe(d.status),placeholder:"usuario@institucion.mx",autoComplete:"email",value:a.email,onChange:b=>l("email",b.target.value),disabled:t,required:!0}),Ke(d.status)]}),pa(d,"Usa un correo permitido por la institucion (termina en @institucion.mx o @aefcm.gob.mx).")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"register-password",children:"Contrasena"}),e.jsxs("div",{className:"input-status",children:[e.jsx("input",{id:"register-password",type:"password",className:Xe(x.status),placeholder:"Debe cumplir los requisitos minimos",autoComplete:"new-password",value:a.password,onChange:b=>l("password",b.target.value),disabled:t,required:!0}),Ke(x.status)]}),x.status==="valid"&&x.message?e.jsx("p",{className:"field-feedback field-feedback--success",children:x.message}):e.jsxs(e.Fragment,{children:[x.status==="error"&&x.message?e.jsx("p",{className:"field-feedback field-feedback--error",children:x.message}):null,n?e.jsx("p",{className:"field-feedback field-feedback--muted whitespace-pre-line",children:n}):null]})]}),r?e.jsx("p",{className:"text-sm text-red-400",children:r}):null,e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[m?e.jsx("button",{type:"button",className:"btn btn-secondary sm:w-auto w-full",onClick:m,disabled:t,children:"Cancelar"}):null,e.jsx("button",{type:"submit",className:"btn btn-primary sm:w-auto w-full",disabled:t||!o,children:t?"Registrando...":"Registrarme"})]})]})},Js=es(fs,"logSensitiveAccess"),Qs=async a=>{try{if(!a.resource||a.resource.trim().length===0)throw new Error("Especifica el recurso que deseas consultar.");return(await Js({resource:a.resource,reason:a.reason??null})).data}catch(t){throw console.error("[SASE-310] No se pudo registrar el acceso sensible:",t),new Error("No fue posible validar la reautenticacion.")}},Zs=({isOpen:a,email:t,resource:r,reason:n,onClose:s,onReauthenticated:o})=>{const[l,c]=i.useState(""),[m,p]=i.useState(!1),[d,x]=i.useState(null);if(i.useEffect(()=>{a||(c(""),x(null))},[a]),!a)return null;const b=async g=>{if(g.preventDefault(),x(null),!T.currentUser){x("No hay una sesion activa para validar.");return}p(!0);try{const f=as.credential(t,l);await ts(T.currentUser,f),await Qs({resource:r,reason:n}),o(),s()}catch(f){console.error("[SASE-310] Reautenticacion fallida:",f),x(f instanceof Error?f.message:"No fue posible validar la reautenticacion.")}finally{p(!1)}};return e.jsx("div",{className:"reauth-modal__backdrop",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"reauth-modal card",children:[e.jsxs("header",{className:"reauth-modal__header",children:[e.jsx("h2",{className:"text-lg font-display text-white",children:"Confirmar identidad"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Este dato requiere una validacion adicional. Ingresa tu contraseña institucional para continuar."})]}),e.jsxs("form",{className:"space-y-4",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"reauth-email",children:"Correo"}),e.jsx("input",{id:"reauth-email",type:"email",className:"input-field w-full",value:t,disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"reauth-password",children:"Contraseña"}),e.jsx("input",{id:"reauth-password",type:"password",className:"input-field w-full",value:l,onChange:g=>c(g.target.value),autoComplete:"current-password",required:!0,minLength:10,disabled:m})]}),d?e.jsx("p",{className:"text-sm text-red-400",children:d}):null,e.jsxs("div",{className:"reauth-modal__actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:s,disabled:m,children:"Cancelar"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m||l.length===0,children:m?"Validando...":"Confirmar acceso"})]})]})]})})},er={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM",VITE_FIREBASE_APP_ID:"1:599375908983:web:b28b69a3770c0947063672",VITE_FIREBASE_AUTH_DOMAIN:"atemimx.firebaseapp.com",VITE_FIREBASE_CONFIG:'{"apiKey":"AIzaSyDPunF6Pj8gEm7QNl-5-gXDzsLiaoNO5kM","authDomain":"atemimx.firebaseapp.com","projectId":"atemimx","storageBucket":"atemimx.firebasestorage.app","messagingSenderId":"599375908983","appId":"1:599375908983:web:b28b69a3770c0947063672"}',VITE_FIREBASE_FUNCTIONS_REGION:"us-central1",VITE_FIREBASE_MESSAGING_SENDER_ID:"599375908983",VITE_FIREBASE_PROJECT_ID:"atemimx",VITE_FIREBASE_STORAGE_BUCKET:"atemimx.firebasestorage.app",VITE_GEMINI_API_KEY:""},ar=1,ha="VITE_ENCRYPTION_MASTER_KEY",tr=new TextEncoder,sr=new TextDecoder,Ba=()=>{const a=typeof window<"u"?window.crypto:typeof globalThis<"u"?globalThis==null?void 0:globalThis.crypto:void 0;if(!a)throw new Error("La API de cifrado del navegador no está disponible.");return a},Ve=()=>{const a=Ba();if(!a.subtle)throw new Error("El motor de cifrado no está disponible en este entorno.");return a.subtle},Ua=()=>{if(typeof globalThis>"u")return null;const a=globalThis.Buffer;return a&&typeof a.from=="function"?a:null},ta=a=>{const t=a.replace(/[^A-Za-z0-9+/=]/g,"");if(typeof window<"u"&&typeof window.atob=="function"){const s=window.atob(t),o=new Uint8Array(s.length);for(let l=0;l<s.length;l+=1)o[l]=s.charCodeAt(l);return o}const r=Ua();if(!r)throw new Error("El entorno actual no soporta decodificación Base64.");const n=r.from(t,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)},fa=a=>{const t=a instanceof Uint8Array?a:new Uint8Array(a);if(typeof window<"u"&&typeof window.btoa=="function"){let n="";return t.forEach(s=>{n+=String.fromCharCode(s)}),window.btoa(n)}const r=Ua();if(!r)throw new Error("El entorno actual no soporta codificación Base64.");return r.from(t).toString("base64")},rr=(()=>{let a=null;return t=>{if(t)return Ve().importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"]);if(!a){const r=er[ha];if(!r)throw new Error(`Falta la variable de entorno ${ha} para habilitar el cifrado.`);const n=ta(r.trim());a=Ve().importKey("raw",n,"AES-GCM",!1,["encrypt","decrypt"])}return a}})(),Ga=a=>rr(),nr=()=>{const a=new Uint8Array(12);return Ba().getRandomValues(a),a},ir=async(a,t)=>{const r=await Ga(),n=nr(),s=tr.encode(a),o=await Ve().encrypt({name:"AES-GCM",iv:n},r,s);return{version:ar,iv:fa(n),ciphertext:fa(o)}},or=async(a,t)=>{if(!(a!=null&&a.iv)||!(a!=null&&a.ciphertext))throw new Error("El payload cifrado es inválido.");const r=await Ga(),n=ta(a.iv),s=ta(a.ciphertext),o=await Ve().decrypt({name:"AES-GCM",iv:n},r,s);return sr.decode(o)},lr=async(a,t)=>ir(JSON.stringify(a)),cr=async(a,t)=>{const r=await or(a);return JSON.parse(r)},dr=a=>!Number.isNaN(Date.parse(a)),$a=Fe({title:_({required_error:"El titulo es obligatorio."}).trim().min(3,{message:"El titulo debe tener al menos 3 caracteres."}).max(120,{message:"El titulo debe tener maximo 120 caracteres."}),description:_({required_error:"La descripcion es obligatoria."}).trim().min(10,{message:"La descripcion debe tener al menos 10 caracteres."}).max(2e3,{message:"La descripcion debe tener maximo 2000 caracteres."}),date:_({required_error:"La fecha es obligatoria."}).trim().refine(dr,{message:"La fecha debe tener un formato valido (YYYY-MM-DD)."}),category:_({required_error:"La categoria es obligatoria."}).trim().min(3,{message:"La categoria debe tener al menos 3 caracteres."}).max(50,{message:"La categoria debe tener maximo 50 caracteres."}),uid:_({required_error:"El identificador de usuario es obligatorio."}).trim().min(1,{message:"El identificador de usuario es obligatorio."})}),qe="reports";$a.omit({uid:!0}).partial();const ur=a=>{const t=a.errors[0];return`Datos de reporte invalidos: ${(t==null?void 0:t.message)??"verifica la informacion ingresada."}`},mr=a=>{try{return $a.parse(a)}catch(t){throw t instanceof Dt?new Error(ur(t)):t}},pr=a=>R.fromDate(new Date(a)),Ye=a=>{const t=a==null?void 0:a.trim();return t&&t.length>0?t:null},hr=(a,t)=>{var r;return{title:a.title,description:a.description,category:a.category,dateISO:a.date,ownerName:Ye(t==null?void 0:t.name)??null,ownerEmail:Ye((r=t==null?void 0:t.email)==null?void 0:r.toLowerCase())??null,ownerRole:Ye(t==null?void 0:t.role)??null}},fr=async a=>a.payload&&typeof a.payload=="object"?cr(a.payload):{title:typeof a.title=="string"?a.title:"",description:typeof a.description=="string"?a.description:"",category:typeof a.category=="string"?a.category:"",dateISO:typeof a.date=="string"?a.date:a.date instanceof R?a.date.toDate().toISOString():"",ownerName:typeof a.ownerName=="string"?a.ownerName:null,ownerEmail:typeof a.ownerEmail=="string"?a.ownerEmail:null,ownerRole:typeof a.ownerRole=="string"?a.ownerRole:null},xr=async(a,t)=>{const r=mr(a),n=R.now(),s=hr(r,t),o=await lr(s),l=Ne(C,qe),c={uid:r.uid,date:pr(r.date),createdAt:n,updatedAt:n,payload:o,encryptionVersion:o.version};try{return{id:(await ss(l,c)).id,uid:c.uid,title:s.title,description:s.description,category:s.category,date:c.date,createdAt:c.createdAt,updatedAt:c.updatedAt,ownerName:s.ownerName,ownerEmail:s.ownerEmail,ownerRole:s.ownerRole}}catch(m){throw console.error("[Firestore] Failed to create report:",m),new Error("No se pudo crear el reporte en Firestore.")}},qa=async a=>{const t=a.data(),r=await fr(t);return{id:a.id,uid:typeof t.uid=="string"?t.uid:"",title:r.title,description:r.description,category:r.category,date:t.date??R.now(),createdAt:t.createdAt??R.now(),updatedAt:t.updatedAt??R.now(),ownerName:r.ownerName,ownerEmail:r.ownerEmail,ownerRole:r.ownerRole}},gr=async a=>{try{const t=Ne(C,qe),r=ra(t,na("uid","==",a)),n=await Be(r);return(await Promise.all(n.docs.map(qa))).sort((o,l)=>l.updatedAt.toMillis()-o.updatedAt.toMillis())}catch(t){throw console.error("[Firestore] Failed to fetch reports for user:",t),new Error("No se pudieron obtener los reportes del usuario.")}},Nn=async()=>{try{const a=Ne(C,qe),t=await Be(a);return(await Promise.all(t.docs.map(qa))).sort((n,s)=>s.updatedAt.toMillis()-n.updatedAt.toMillis())}catch(a){throw console.error("[Firestore] Failed to fetch all reports:",a),new Error("No se pudieron obtener los reportes registrados.")}},br=async a=>{try{const t=D(C,qe,a);await rs(t)}catch(t){throw console.error(`[Firestore] Failed to delete report (${a}):`,t),new Error("No se pudo eliminar el reporte.")}},xa=/@(institucion\.mx|aefcm\.gob\.mx)$/i,yr="Usa un correo institucional autorizado (termina en @institucion.mx o @aefcm.gob.mx).",jr=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{10,}$/,wr=["- Minimo 10 caracteres.","- Incluye al menos una letra mayuscula.","- Incluye al menos una letra minuscula.","- Incluye al menos un numero."].join(`
`),Le="SECUNDARIA 310 PRESIDENTES DE MEXICO",vr=["Seguimiento","Incidencia","Planeacion","Otro"],ga="teacher",Je=a=>ua[a??ga]??ua[ga],De={email:"",password:""},Qe={nombreCompleto:"",email:"",password:""},ba={title:"",description:"",category:"",date:""},Nr=({onNavigateHome:a})=>{const{user:t,loading:r}=za(),[n,s]=i.useState("chooser"),[o,l]=i.useState(De),[c,m]=i.useState(Qe),[p,d]=i.useState(!1),[x,b]=i.useState(!1),[g,f]=i.useState(null),[y,v]=i.useState(null),[u,S]=i.useState(null),[N,P]=i.useState(!1),[K,ue]=i.useState(null),[k,W]=i.useState(null),[me,G]=i.useState(!1),[pe,O]=i.useState(null),[$,Y]=i.useState(!1),[Ee,he]=i.useState(!1),[fe,J]=i.useState(!1),[xe,X]=i.useState([]),[Ae,ge]=i.useState(!1),[be,_e]=i.useState(null),[L,Ie]=i.useState(ba),[Ce,Q]=i.useState(!1),[Re,V]=i.useState(null),[Pe,q]=i.useState(null),F=o.email.trim().toLowerCase(),Z=c.email.trim().toLowerCase(),ke=(u==null?void 0:u.email)??(t==null?void 0:t.email)??"",ye=ke.length>0,E=i.useMemo(()=>t?`docentes/${t.uid}`:"docentes/unknown",[t==null?void 0:t.uid]),M=i.useMemo(()=>u!=null&&u.rol?Xs(u.rol):le,[u==null?void 0:u.rol]),Me=i.useMemo(()=>Z?xa.test(Z):!0,[Z]),ee=i.useMemo(()=>{const h=c.nombreCompleto.trim();return h?h.length<6?{status:"error",message:"Incluye tu nombre y al menos un apellido."}:h.split(/\s+/).length<2?{status:"error",message:"Agrega tus apellidos para validar el registro."}:/^[A-ZÁÉÍÓÚÜÑ\s'.-]+$/i.test(h)?{status:"valid",message:"Nombre listo para validar contra la plantilla autorizada."}:{status:"error",message:"Usa solo letras y espacios en tu nombre."}:{status:"idle",message:"Captura tu nombre completo tal como aparece en la plantilla."}},[c.nombreCompleto]),ae=i.useMemo(()=>c.email.trim()?Me?{status:"valid",message:"Correo institucional verificado."}:{status:"error",message:"El correo no pertenece a la institución. Usa una cuenta autorizada."}:{status:"idle",message:yr},[c.email,Me]),te=i.useMemo(()=>{const h=c.password.trim();return h?jr.test(h)?{status:"valid",message:"Contrasena segura y lista para usar."}:{status:"error",message:"Incluye 10 caracteres, mayuscula, minuscula y numero."}:{status:"idle",message:"Crea una contrasena segura para tu cuenta."}},[c.password]),Xa=i.useMemo(()=>({nombreCompleto:ee,email:ae,password:te}),[ee,ae,te]),Ka=i.useMemo(()=>ee.status==="valid"&&ae.status==="valid"&&te.status==="valid",[ee.status,ae.status,te.status]),se=(u==null?void 0:u.autorizado)===!0,I=p||x||Ce||$,B=(h=M,j="md")=>e.jsx("figure",{className:`card-brand card-brand--${j}`,children:e.jsx("img",{src:h.image,alt:h.label})}),je=()=>{f(null),v(null)},ze=h=>{s(h),je(),l(De),m(Qe),b(!1)},ca=h=>j=>{je(),l(z=>({...z,[h]:j.target.value}))},Ya=(h,j)=>{je();const z=h==="nombreCompleto"?j.toUpperCase():j;m(U=>({...U,[h]:z}))},Ja=async h=>{h.preventDefault(),je(),d(!0);try{if(!F||!o.password){f("Completa tu correo y contrasena.");return}const j=await Es(F,o.password);await Ls(j.uid,j.email??F),l(De),s("chooser")}catch(j){console.error("[SASE-310] Login failed:",j),f(j instanceof Error?j.message:"No fue posible iniciar sesion.")}finally{d(!1)}},Qa=async()=>{if(f(null),v(null),!F){f("Escribe tu correo institucional para recuperar tu contrasena.");return}if(!xa.test(F)){f("Usa un correo institucional autorizado antes de solicitar el restablecimiento.");return}b(!0);try{await As(F),v("Te enviamos instrucciones para restablecer tu contrasena. Revisa tu bandeja de entrada.")}catch(h){console.error("[SASE-310] Password reset failed:",h),f(h instanceof Error?h.message:"No pudimos enviar el correo de restablecimiento.")}finally{b(!1)}},Za=async h=>{if(h.preventDefault(),je(),ee.status!=="valid"){f(ee.message??"Revisa tu nombre completo.");return}if(ae.status!=="valid"){f(ae.message??"Usa un correo institucional valido.");return}if(te.status!=="valid"){f(te.message??"Completa una contrasena segura.");return}const j=c.nombreCompleto.trim().toUpperCase(),z=c.password.trim();d(!0);try{const{user:U,profile:pt}=await Ts({nombreCompleto:j,email:Z,password:z});await ma(U.uid,{nombre:j,plantel:Le}),m(Qe),v("Registro recibido. Vinculamos tu perfil automaticamente, espera unos segundos."),S(pt),s("chooser")}catch(U){console.error("[SASE-310] Register failed:",U),f(U instanceof Error?U.message:"No fue posible completar el registro.")}finally{d(!1)}},da=async()=>{d(!0);try{await La(),s("chooser"),l(De),a==null||a()}catch(h){console.error("[SASE-310] Logout failed:",h),f("No fue posible cerrar sesion. Intenta nuevamente.")}finally{d(!1)}},we=i.useCallback(async()=>{if(!t||!se){X([]);return}ge(!0),_e(null);try{const h=await gr(t.uid);X(h)}catch(h){console.error("[SASE-310] Failed to fetch reports:",h),_e("No fue posible cargar los reportes.")}finally{ge(!1)}},[t,se]);i.useEffect(()=>{we()},[we]),i.useEffect(()=>{if(!t){S(null),P(!1),ue(null);return}P(!0),ue(null);const h=Os(t.uid,j=>{S(j),P(!1)},j=>{console.error("[SASE-310] observeUserProfile error:",j),ue("No fue posible cargar tu perfil docente."),P(!1)});return()=>{h()}},[t]),i.useEffect(()=>{if(!u||se)return;const h=window.setTimeout(()=>{a==null||a(),s("chooser")},4e3);return()=>window.clearTimeout(h)},[u,se,a]),i.useEffect(()=>{if(!t){W(null),G(!1),O(null);return}G(!0),O(null);const h=Bs(t.uid,j=>{W(j),G(!1)},j=>{console.error("[SASE-310] observeTeacherProfile error:",j),O("No fue posible cargar tus datos docentes."),G(!1)});return()=>{h()}},[t]),i.useEffect(()=>{var j,z;if(!t||!u||k||me||$)return;const h=((j=u.nombreCompleto)==null?void 0:j.trim().toUpperCase())??((z=u.email)==null?void 0:z.toUpperCase())??"DOCENTE";Y(!0),O(null),ma(t.uid,{nombre:h,plantel:Le}).catch(U=>{console.error("[SASE-310] Auto save teacher profile failed:",U),O("No pudimos vincular tus datos docentes automaticamente.")}).finally(()=>{Y(!1)})},[t,u,k,me,$]);const Te=h=>j=>{V(null),q(null),Ie(z=>({...z,[h]:j.target.value}))},et=async h=>{if(h.preventDefault(),!t){V("Debes iniciar sesion para crear un reporte.");return}if(!se){V("Tu cuenta aun no ha sido autorizada.");return}Q(!0),V(null),q(null);try{const j={title:L.title.trim(),description:L.description.trim(),category:L.category.trim(),date:L.date.trim(),uid:t.uid},z={name:(u==null?void 0:u.nombreCompleto)??(k==null?void 0:k.nombre)??null,email:t.email??null,role:(u==null?void 0:u.rol)??null};await xr(j,z),Ie({...ba,category:j.category}),q("Reporte creado correctamente."),await we()}catch(j){console.error("[SASE-310] Create report failed:",j),V(j instanceof Error?j.message:"No fue posible crear el reporte.")}finally{Q(!1)}},at=async h=>{Q(!0),V(null),q(null);try{await br(h),q("Reporte eliminado."),await we()}catch(j){console.error("[SASE-310] Delete report failed:",j),V("No fue posible eliminar el reporte.")}finally{Q(!1)}},tt=()=>e.jsxs("section",{className:"card space-y-4",children:[B(le),e.jsxs("header",{children:[e.jsx("h2",{className:"text-xl font-display text-white",children:"SASE-310 Piloto"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Elige como deseas continuar."})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[e.jsx("button",{type:"button",className:"btn btn-primary w-full",onClick:()=>ze("login"),disabled:I,children:"Ingresar con correo y contrasena"}),e.jsx("button",{type:"button",className:"btn btn-secondary w-full",onClick:()=>ze("register"),disabled:I,children:"Registrate"})]})]}),st=()=>e.jsxs("section",{className:"card space-y-4",children:[B(le),e.jsxs("header",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-display text-white",children:"Ingresar"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Usa tu correo institucional u oficial. Si no tienes cuenta, vuelve y elige la opcion de registro."})]}),e.jsxs("form",{onSubmit:Ja,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"login-email",children:"Correo"}),e.jsx("input",{id:"login-email",type:"email",className:"input-field w-full",placeholder:"ej. docente@aefcm.gob.mx",value:o.email,onChange:ca("email"),disabled:I,required:!0,autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"login-password",children:"Contrasena"}),e.jsx("input",{id:"login-password",type:"password",className:"input-field w-full",placeholder:"Tu contrasena",value:o.password,onChange:ca("password"),disabled:I,required:!0,autoComplete:"current-password"})]}),g?e.jsx("p",{className:"text-sm text-red-400",children:g}):null,y?e.jsx("p",{className:"text-sm text-emerald-400",children:y}):null,e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsx("button",{type:"button",className:"btn btn-secondary md:w-auto w-full",onClick:()=>ze("chooser"),children:"Volver"}),e.jsx("button",{type:"submit",className:"btn btn-primary md:w-auto w-full",disabled:I||!o.email||!o.password,children:p?"Ingresando...":"Ingresar"})]}),e.jsx("button",{type:"button",className:"link-button md:self-end",onClick:Qa,disabled:x||I,children:x?"Enviando instrucciones...":"¿Olvidaste tu contrasena?"})]})]}),rt=()=>e.jsxs("section",{className:"card space-y-5",children:[B(le),e.jsxs("header",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-display text-white",children:"Registro con lista blanca"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Validamos tu nombre contra la plantilla autorizada. Si coincide y no se ha usado, tu cuenta queda activa de inmediato."})]}),e.jsx(Ys,{values:c,submitting:p,serverError:g,passwordHint:wr,validation:Xa,canSubmit:Ka,onChange:Ya,onSubmit:Za,onCancel:()=>ze("chooser")}),y?e.jsx("p",{className:"text-sm text-emerald-400",children:y}):null,e.jsxs("p",{className:"text-xs text-gray-500",children:["La lista blanca se gestiona desde Firestore. Cada docente cuenta con un unico acceso asignado y se vincula automaticamente al plantel ",Le,"."]})]}),nt=()=>e.jsx("section",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[B(M,"sm"),e.jsx("p",{className:"text-sm text-gray-400",children:"Validando permisos docentes..."})]})}),it=()=>e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[B(M,"sm"),e.jsx("h3",{className:"text-lg font-display mb-2",children:"No fue posible cargar tu perfil docente"}),e.jsx("p",{className:"text-sm text-red-400",children:K}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Intenta cerrar sesion y volver a ingresar."})]}),e.jsxs("div",{className:"card flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Puedes volver al menu principal si lo prefieres."}),e.jsx("button",{type:"button",className:"btn btn-secondary md:w-auto w-full",onClick:da,disabled:I,children:"Cerrar sesion"})]})]}),ot=()=>e.jsx("section",{className:"space-y-6",children:e.jsxs("div",{className:"card space-y-3",children:[B(M,"sm"),e.jsx("h3",{className:"text-lg font-display text-white",children:"Registrando datos docentes..."}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Estamos vinculando tu perfil con el plantel ",Le,". Este paso ocurre automaticamente la primera vez que ingresas."]}),$?e.jsx("p",{className:"text-sm text-gray-400",children:"Guardando informacion..."}):null,pe?e.jsx("p",{className:"text-sm text-red-400",children:pe}):e.jsx("p",{className:"text-xs text-gray-500",children:"Puedes permanecer en esta pantalla; en segundos te mostraremos el modulo cuando la sincronizacion finalice."})]})}),lt=()=>e.jsxs("section",{className:"card space-y-4",children:[B(M),e.jsx("h3",{className:"text-lg font-display text-white",children:"Preregistro recibido"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tu cuenta esta en validacion. Te avisaremos al correo cuando puedas ingresar al modulo."}),e.jsxs("div",{className:"rounded-md border border-gray-800 bg-black/20 p-3 text-xs text-gray-300 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Correo:"})," ",(t==null?void 0:t.email)??"Sin correo"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-white",children:"Rol asignado:"})," ",Je(u==null?void 0:u.rol)]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Te enviaremos un aviso cuando la cuenta este autorizada. Esta ventana se cerrara automaticamente."})]}),ct=()=>e.jsxs("section",{className:"card space-y-4",children:[e.jsx("div",{className:"flex justify-center md:justify-end",children:B(M,"sm")}),e.jsxs("header",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-display text-white",children:"Datos protegidos"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Confirma tu contrasena institucional para consultar los datos asociados a tu perfil docente."})]}),Ee?e.jsxs("dl",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold text-white",children:"Plantel asignado"}),e.jsx("dd",{children:(k==null?void 0:k.plantel)??"Sin registro"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold text-white",children:"Nombre oficial"}),e.jsx("dd",{children:(u==null?void 0:u.nombreCompleto)??(k==null?void 0:k.nombre)??"Sin registro"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold text-white",children:"Correo institucional"}),e.jsx("dd",{children:(u==null?void 0:u.email)??t.email??"Sin correo"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold text-white",children:"Rol operativo"}),e.jsx("dd",{children:Je(u==null?void 0:u.rol)})]})]}):e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-1 text-sm text-gray-400",children:["La informacion sensible permanece oculta hasta validar tu identidad.",ye?null:e.jsx("p",{className:"mt-2 text-xs text-yellow-400",children:"No detectamos un correo institucional vinculado. Solicita asistencia al administrador."})]}),e.jsx("button",{type:"button",className:"btn btn-secondary sm:w-auto w-full",onClick:()=>J(!0),disabled:I||!ye,children:"Desbloquear datos sensibles"})]})]}),dt=()=>e.jsxs("header",{className:"card flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[B(M,"sm"),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-display text-[var(--accent-1)]",children:"SASE-310 Reportes"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Gestiona reportes vinculados a tu cuenta docente."})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-semibold text-white",children:(t==null?void 0:t.email)??"Sin correo"}),e.jsxs("span",{className:"block text-xs text-gray-500",children:["Rol: ",Je(u==null?void 0:u.rol)]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:da,disabled:I,children:p?"Cerrando sesion...":"Cerrar sesion"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{a==null||a()},disabled:I,children:"Volver al menu"})]})]})]}),ut=()=>e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-display mb-4",children:"Crear nuevo reporte"}),e.jsxs("form",{onSubmit:et,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"report-title",children:"Titulo"}),e.jsx("input",{id:"report-title",type:"text",className:"input-field w-full",placeholder:"Ej. Seguimiento de clase",value:L.title,onChange:Te("title"),disabled:I,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"report-description",children:"Descripcion"}),e.jsx("textarea",{id:"report-description",className:"input-field w-full h-32",placeholder:"Describe la situacion o seguimiento",value:L.description,onChange:Te("description"),disabled:I,required:!0})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"report-category",children:"Categoria"}),e.jsxs("select",{id:"report-category",className:"input-field w-full",value:L.category,onChange:Te("category"),disabled:I,required:!0,children:[e.jsx("option",{value:"",children:"Selecciona una categoria"}),vr.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm text-gray-300",htmlFor:"report-date",children:"Fecha"}),e.jsx("input",{id:"report-date",type:"date",className:"input-field w-full",value:L.date,onChange:Te("date"),disabled:I,required:!0})]})]}),Re?e.jsx("p",{className:"text-sm text-red-400",children:Re}):null,Pe?e.jsx("p",{className:"text-sm text-emerald-400",children:Pe}):null,e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:I,children:Ce?"Guardando...":"Guardar reporte"})]})]}),mt=()=>e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-display",children:"Historial de reportes"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>void we(),disabled:I,children:"Recargar"})]}),Ae?e.jsx("p",{className:"text-sm text-gray-400",children:"Cargando reportes..."}):null,be?e.jsx("p",{className:"text-sm text-red-400",children:be}):null,!Ae&&xe.length===0&&!be?e.jsx("p",{className:"text-sm text-gray-400",children:"Aun no has registrado reportes."}):null,e.jsx("ul",{className:"space-y-3",children:xe.map(h=>e.jsxs("li",{className:"bg-black/30 border border-gray-800 rounded-lg p-3",children:[e.jsxs("header",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-white",children:h.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Creado: ",h.createdAt.toDate().toLocaleString()," | Ultima actualizacion:"," ",h.updatedAt.toDate().toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Categoria: ",h.category," | Fecha de aplicacion: ",h.date.toDate().toLocaleDateString()]})]}),e.jsx("button",{type:"button",className:"btn btn-secondary text-xs px-2 py-1",onClick:()=>void at(h.id),disabled:I,children:"Eliminar"})]}),e.jsx("p",{className:"text-sm text-gray-200 mt-2 whitespace-pre-wrap",children:h.description})]},h.id))})]});return t?N||me?nt():K?it():k?se?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"space-y-6",children:[dt(),ct(),ut(),mt()]}),e.jsx(Zs,{isOpen:fe&&ye,onClose:()=>J(!1),onReauthenticated:()=>he(!0),email:ke,resource:E,reason:"Consulta de datos sensibles del perfil docente"})]}):lt():ot():n==="login"?st():n==="register"?rt():tt()};class Sr extends Sa.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleReset=()=>{this.setState({hasError:!1,error:void 0})}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("[UI] Unhandled rendering error:",t,r)}render(){var t;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"error-fallback",children:[e.jsx("h2",{children:"Ocurrió un problema."}),e.jsx("p",{children:((t=this.state.error)==null?void 0:t.message)??"La interfaz no pudo renderizarse correctamente."}),e.jsx("button",{type:"button",onClick:this.handleReset,children:"Reintentar"})]}):this.props.children}}const Er=({open:a,onClose:t,user:r,onOpenSase:n,onShowSecurity:s,variant:o="modal"})=>{const[l,c]=i.useState("grid"),m=o==="floating",p=i.useMemo(()=>[{id:"reports",label:"Reportes",description:"Bitácora integral",icon:Ea,accent:"jade"},{id:"planner",label:"Planeador",description:"Rutas y evidencias",icon:ft},{id:"calendar",label:"Horario",description:"Semana docente",icon:Aa},{id:"notes",label:"Notas",description:"Seguimiento rápido",icon:xt},{id:"backup",label:"Backup & Sync",description:"Google Drive",icon:gt,accent:"gold"},{id:"alerts",label:"Avisos",description:"Recordatorios",icon:bt},{id:"security",label:"Seguridad",description:"PIN / Biométrico",icon:_a,action:s},{id:"support",label:"Soporte Ateni",description:"Tutoriales",icon:yt},{id:"sessions",label:"Sesiones",description:"Historial",icon:jt,disabled:!0},{id:"sase",label:"Módulo SASE-310",description:"Entrar ahora",icon:wt,accent:"magenta",action:n}],[n,s]);return a?e.jsxs("div",{className:`global-menu ${m?"global-menu--floating":""}`,role:"dialog","aria-modal":!m,"aria-label":"Menú general AtemiMX",children:[m?null:e.jsx("div",{className:"global-menu__backdrop",onClick:t,"aria-hidden":"true"}),e.jsxs("div",{className:"global-menu__panel",children:[e.jsxs("header",{className:"global-menu__header",children:[e.jsxs("div",{className:"global-menu__heading",children:[e.jsx("p",{children:"AtemiMX"}),e.jsx("h2",{children:"Menú general"})]}),e.jsxs("div",{className:"global-menu__header-actions",children:[e.jsx("button",{type:"button",className:`global-menu__toggle ${l==="grid"?"is-active":""}`,"aria-label":"Vista en cuadrícula",onClick:()=>c("grid"),children:e.jsx(vt,{size:18,"aria-hidden":!0})}),e.jsx("button",{type:"button",className:`global-menu__toggle ${l==="list"?"is-active":""}`,"aria-label":"Vista en lista",onClick:()=>c("list"),children:e.jsx(Nt,{size:18,"aria-hidden":!0})}),e.jsx("button",{type:"button",className:"global-menu__close",onClick:t,"aria-label":"Cerrar menú",children:e.jsx(Ia,{size:18,"aria-hidden":!0})})]})]}),e.jsx("div",{className:`global-menu__content global-menu__content--${l}`,children:p.map(d=>{const x=d.icon;return e.jsxs("button",{type:"button",className:`global-menu__item global-menu__item--${d.accent??"default"}`,onClick:()=>d.action?d.action():null,disabled:d.disabled,children:[e.jsx("span",{className:"global-menu__icon",children:e.jsx(x,{size:24,"aria-hidden":!0})}),e.jsxs("span",{className:"global-menu__label",children:[e.jsx("strong",{children:d.label}),e.jsx("small",{children:d.description})]})]},d.id)})}),e.jsxs("footer",{className:"global-menu__footer",children:[e.jsxs("div",{className:"global-menu__status",children:[e.jsx("span",{}),e.jsx("p",{children:r?`Sesión activa · ${r.email??r.displayName??"Docente"}`:"Inicia sesión para acceder a SASE-310"})]}),e.jsx("button",{type:"button",className:"global-menu__cta",onClick:n,children:"Entrar al módulo SASE-310"})]})]})]}):null},Ar=({text:a,speed:t=40,className:r,onComplete:n})=>{const[s,o]=i.useState(""),[l,c]=i.useState(!1);return i.useEffect(()=>{o(""),c(!1);let m=0;const p=setInterval(()=>{m<a.length?(o(d=>d+a.charAt(m)),m++):(clearInterval(p),c(!0),n&&n())},t);return()=>clearInterval(p)},[a,t,n]),e.jsxs("div",{className:r,children:[s,!l&&e.jsx("span",{className:"blinking-cursor",children:"|"})]})},_r=({onStart:a})=>e.jsxs("section",{className:"idea-intro","aria-label":"Introducción AtemiMX",children:[e.jsx("div",{className:"idea-intro__glow","aria-hidden":"true"}),e.jsxs("div",{className:"idea-intro__content",children:[e.jsx("p",{className:"idea-intro__eyebrow",children:"Idea en prototipo"}),e.jsx(Ar,{className:"idea-intro__title",text:"AtemiMX",speed:120}),e.jsx("p",{className:"idea-intro__subtitle",children:"Arquitectura S-SDLC para bienestar escolar."}),e.jsx("p",{className:"idea-intro__description",children:"Imagina la experiencia completa: entrevista inicial, feria de bases, Ángel Guardián y el módulo SASE-310, todo orquestado desde un solo espacio."}),e.jsx("button",{type:"button",className:"idea-intro__cta",onClick:a,children:"Empezar"})]})]}),Ir=({open:a,pinEnabled:t,onRequestSetup:r,onDisable:n,onClose:s})=>a?e.jsxs("div",{className:"pin-preferences",role:"dialog","aria-modal":"true","aria-label":"Configuración de PIN AtemiMX",children:[e.jsx("div",{className:"pin-preferences__backdrop",onClick:s,"aria-hidden":"true"}),e.jsxs("div",{className:"pin-preferences__panel",children:[e.jsxs("header",{children:[e.jsx("p",{children:"AtemiMX"}),e.jsx("h3",{children:"Seguridad y autenticación"}),e.jsx("p",{className:"pin-preferences__hint",children:"Define cómo quieres volver a entrar a la app cuando regreses desde este dispositivo."})]}),e.jsxs("section",{children:[e.jsx("p",{className:`pin-preferences__status ${t?"is-active":""}`,children:t?"PIN activo para reingreso.":"El PIN aún no está configurado."}),e.jsxs("div",{className:"pin-preferences__actions",children:[e.jsx("button",{type:"button",className:"pin-preferences__primary",onClick:r,children:t?"Cambiar PIN":"Configurar PIN"}),t?e.jsx("button",{type:"button",className:"pin-preferences__ghost",onClick:n,children:"Desactivar PIN"}):null]})]}),e.jsx("footer",{children:e.jsx("button",{type:"button",className:"pin-preferences__ghost",onClick:s,children:"Cerrar"})})]})]}):null,Cr=({activeView:a,hasSession:t,logoutPending:r=!1,onSelectHome:n,onResetView:s,onSelectSase:o,onSelectAdmin:l,onOpenHelp:c,onOpenSettings:m,onLogout:p,canAccessAdmin:d=!1,onOpenLauncher:x,onToggleCollapse:b,isCollapsed:g})=>e.jsxs("aside",{className:`sidebar ${g?"sidebar--collapsed":""}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"sidebar__brand-row",children:[e.jsx("button",{type:"button",className:"sidebar__collapse",onClick:b,"aria-label":g?"Expandir panel lateral":"Contraer panel lateral",children:g?e.jsx(St,{size:18,"aria-hidden":!0}):e.jsx(Et,{size:18,"aria-hidden":!0})}),e.jsxs("button",{type:"button",className:"sidebar__brand",onClick:s,"aria-label":"Volver al panel base AtemiMX",children:[e.jsxs("span",{className:"sidebar__brand-text",children:[e.jsx("span",{className:"sidebar__brand-accent",children:"Atemi"}),"MX"]}),e.jsx("span",{className:"sidebar__brand-badge",children:"v3.6"})]})]}),e.jsxs("nav",{className:"sidebar__nav",children:[e.jsxs("button",{type:"button",className:"sidebar__nav-item",onClick:x,"aria-label":"Abrir menú general AtemiMX",children:[e.jsx(At,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Menú general"})]}),e.jsxs("button",{type:"button",className:`sidebar__nav-item ${a==="menu"?"is-active":""}`,onClick:n,"aria-label":"Panel principal AtemiMX",children:[e.jsx(_t,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Panel principal"})]}),e.jsxs("button",{type:"button",className:"sidebar__nav-item is-disabled",disabled:!0,children:[e.jsx(It,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Cuaderno"}),e.jsx("span",{className:"sidebar__pill",children:"Pronto"})]}),e.jsxs("button",{type:"button",className:"sidebar__nav-item is-disabled",disabled:!0,children:[e.jsx(Aa,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Planeaciones"}),e.jsx("span",{className:"sidebar__pill",children:"Pronto"})]}),e.jsxs("button",{type:"button",className:`sidebar__nav-item ${a==="sase310"?"is-active":""}`,onClick:o,"aria-label":"Ir al módulo SASE-310",children:[e.jsx(Ea,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"SASE-310"}),t?null:e.jsx("span",{className:"sidebar__pill",children:"Login"})]}),d?e.jsxs("button",{type:"button",className:`sidebar__nav-item ${a==="admin"?"is-active":""}`,onClick:l,"aria-label":"Panel de administración",children:[e.jsx(Ct,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Administración"})]}):null]})]}),e.jsxs("div",{className:"sidebar__actions",children:[e.jsxs("button",{type:"button",className:"sidebar__action",onClick:c,children:[e.jsx(Rt,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Ayuda"})]}),e.jsxs("button",{type:"button",className:"sidebar__action",onClick:m,children:[e.jsx(Pt,{size:18,"aria-hidden":!0}),e.jsx("span",{children:"Configuración"})]}),e.jsxs("button",{type:"button",className:"sidebar__action sidebar__action--danger",disabled:r||!t,onClick:p,children:[e.jsx(kt,{size:18,"aria-hidden":!0}),e.jsx("span",{children:r?"Saliendo...":"Salir"})]})]})]}),Rr=["1","2","3","4","5","6","7","8","9","cancel","0","ok"],Pr=({open:a,mode:t,onCancel:r,onSubmit:n,maxDigits:s=6,biometricLabel:o="Touch ID para AtemiMX",errorMessage:l})=>{const[c,m]=i.useState(""),p=g=>{if(g==="cancel"){m(""),r==null||r();return}if(g==="ok"){c.length>0&&(n==null||n(c),m(""));return}c.length>=s||m(f=>f+g)},d=i.useMemo(()=>Array.from({length:s},(g,f)=>f<c.length?"filled":"empty"),[s,c.length]),x=t==="setup"?"Configura un PIN":"Teclea tu PIN",b=t==="setup"?"Define un PIN de seguridad para los próximos ingresos en este dispositivo.":"Protegemos tu bitácora S-SDLC.";return a?e.jsxs("div",{className:"security-pin",role:"dialog","aria-modal":"true","aria-label":"Autenticación AteniMX",children:[e.jsx("div",{className:"security-pin__pattern","aria-hidden":"true"}),e.jsxs("div",{className:"security-pin__panel",children:[e.jsxs("div",{className:"security-pin__panel-header",children:[e.jsx(_a,{size:24,"aria-hidden":!0}),e.jsx("button",{type:"button",className:"security-pin__close",onClick:r,"aria-label":"Cerrar",children:e.jsx(Ia,{size:20,"aria-hidden":!0})})]}),e.jsxs("div",{className:"security-pin__heading",children:[e.jsx("p",{className:"security-pin__eyebrow",children:"Sesión AtemiMX"}),e.jsx("h2",{children:x}),e.jsx("p",{children:b})]}),e.jsx("div",{className:"security-pin__code",children:d.map((g,f)=>e.jsx("span",{className:`security-pin__dot security-pin__dot--${g}`,"aria-hidden":"true"},`pin-dot-${f}`))}),l?e.jsxs("div",{className:"security-pin__error",role:"alert",children:[e.jsx(Na,{size:16,"aria-hidden":!0}),e.jsx("span",{children:l})]}):null,e.jsxs("div",{className:"security-pin__biometric",children:[e.jsxs("div",{className:"security-pin__biometric-card",children:[e.jsx(Mt,{size:28,"aria-hidden":!0}),e.jsx("span",{children:o})]}),e.jsx("button",{type:"button",onClick:()=>m(""),children:"Cancelar"})]}),e.jsx("div",{className:"security-pin__keypad",role:"group","aria-label":"Teclado numérico",children:Rr.map(g=>e.jsx("button",{type:"button",className:`security-pin__key${g==="ok"?" security-pin__key--ok":g==="cancel"?" security-pin__key--cancel":""}`,onClick:()=>p(g),children:g==="cancel"?"Cancelar":g==="ok"?"OK":g},g))})]})]}):null},kr="modulepreload",Mr=function(a,t){return new URL(a,t).href},ya={},H=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(d){return Promise.all(d.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};const c=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));s=l(r.map(d=>{if(d=Mr(d,n),d in ya)return;ya[d]=!0;const x=d.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(!!n)for(let y=c.length-1;y>=0;y--){const v=c[y];if(v.href===d&&(!x||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${b}`))return;const f=document.createElement("link");if(f.rel=x?"stylesheet":kr,x||(f.as="script"),f.crossOrigin="",f.href=d,p&&f.setAttribute("nonce",p),document.head.appendChild(f),x)return new Promise((y,v)=>{f.addEventListener("load",y),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};var A=(a=>(a.Teacher="teacher",a.Guidance="guidance",a.Admin="admin",a.Prefect="prefect",a.Student="student",a))(A||{}),ne=(a=>(a.Disciplinary="Disciplinario",a.SocioEmotional="Socio-emocional",a.Academic="Académico",a.Attendance="Asistencia",a))(ne||{}),ie=(a=>(a.New="Nuevo",a.InProgress="En Progreso",a.Resolved="Resuelto",a))(ie||{}),oe=(a=>(a.High="Alta",a.Medium="Media",a.Low="Baja",a))(oe||{});const zr=a=>e.jsxs("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",...a,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#1e40af",stopOpacity:1}})]})}),e.jsx("text",{x:"0",y:"22",fontFamily:"Arial, sans-serif",fontSize:"24",fontWeight:"bold",fill:"url(#logoGradient)",children:"Atemi"}),e.jsx("text",{x:"75",y:"22",fontFamily:"Arial, sans-serif",fontSize:"24",fontWeight:"300",fill:"#4b5563",children:"MX"})]}),w=a=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...a,children:a.children}),Tr=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"})}),Lr=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-2.429 0-4.5 1.755-4.5 4.5v.255c-.95.24-1.809.59-2.618 1.052A9.738 9.738 0 002.25 12c0 2.868 1.22 5.457 3.22 7.282.995.922 2.203 1.543 3.53 1.874A.75.75 0 0010.5 21v-1.556c1.17.22 2.339.22 3.509 0V21a.75.75 0 001.5 0v-1.398a6.836 6.836 0 003.53-1.874C20.53 17.457 21.75 14.868 21.75 12a9.738 9.738 0 00-2.632-6.443 13.682 13.682 0 00-2.618-1.052V6.75c0-2.745-2.071-4.5-4.5-4.5zM15 6.75v.255a8.25 8.25 0 00-6 0V6.75c0-1.5.75-3 3-3s3 1.5 3 3zM12 10.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z",clipRule:"evenodd"})}),Dr=a=>e.jsxs(w,{...a,children:[e.jsx("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),e.jsx("path",{d:"M12 5.432l8.159 8.159c.026.026.05.054.07.084v6.175a2.25 2.25 0 01-2.25 2.25H6.a2.25 2.25 0 01-2.25-2.25v-6.175a.973.973 0 01.07-.084L12 5.432z"})]}),Ze=a=>e.jsxs(w,{...a,children:[e.jsx("path",{d:"M3.375 4.5A2.25 2.25 0 015.625 2.25h12.75c1.243 0 2.25 1.007 2.25 2.25v3.83c-1.233-.73-2.65-1.162-4.125-1.162h-7.5c-1.475 0-2.892.432-4.125 1.162V4.5z"}),e.jsx("path",{fillRule:"evenodd",d:"M3 10.165v-.195c.98-.58 2.083-.935 3.25-1.022v.121a3 3 0 003 3h4.5a3 3 0 003-3v-.12c1.167.087 2.27.442 3.25 1.022v.195c0 1.243-1.007 2.25-2.25 2.25H5.25A2.25 2.25 0 013 10.165zM3.375 14.25a2.25 2.25 0 012.25-2.25h12.75a2.25 2.25 0 012.25 2.25v3.75a2.25 2.25 0 01-2.25-2.25H5.625a2.25 2.25 0 01-2.25-2.25v-3.75z",clipRule:"evenodd"})]}),Or=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z",clipRule:"evenodd"})}),Vr=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.543A6.001 6.001 0 005.812 6.643a1.85 1.85 0 00-2.43 1.094 6.001 6.001 0 00-1.094 2.43 1.85 1.85 0 00-1.543 1.85c0 .916.663 1.699 1.543 1.85a6.001 6.001 0 001.094 2.43 1.85 1.85 0 002.43 1.094 6.001 6.001 0 002.43 1.094 1.85 1.85 0 001.85 1.543c.916 0 1.699-.663 1.85-1.543a6.001 6.001 0 002.43-1.094 1.85 1.85 0 001.094-2.43 6.001 6.001 0 001.094-2.43 1.85 1.85 0 001.543-1.85c0-.916-.663-1.699-1.543-1.85a6.001 6.001 0 00-1.094-2.43 1.85 1.85 0 00-1.094-2.43 6.001 6.001 0 00-2.43-1.094A1.85 1.85 0 0011.078 2.25zM12 15a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),ja=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M1.5 2.625c0-.986.89-1.775 1.992-1.626a5.25 5.25 0 014.288 4.288C7.901 6.275 7.11 7.165 6.125 7.165H3.375A1.875 1.875 0 011.5 5.25v-2.625zM22.5 16.335c0 .986-.89 1.775-1.992 1.626a5.25 5.25 0 01-4.288-4.288c-.149-1.008.642-1.898 1.627-1.898h2.75a1.875 1.875 0 011.875 1.875v2.685zM12.75 1.5a.75.75 0 00-1.5 0v.503a5.23 5.23 0 014.73 4.73h.503a.75.75 0 000-1.5h-.43a3.73 3.73 0 00-3.3-3.3v-.43zM8.25 8.25A.75.75 0 009 7.5h.503a5.23 5.23 0 014.73 4.73v.503a.75.75 0 001.5 0v-.43a3.73 3.73 0 00-3.3-3.3h-.43a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),Fr=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 006 5.25v13.5a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V15a.75.75 0 00-1.5 0v3.75a.75.75 0 01-.75.75h-4.5a.75.75 0 01-.75-.75V5.25a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75V9a.75.75 0 001.5 0V5.25a1.5 1.5 0 00-1.5-1.5h-6zM15.06 12L12 8.94a.75.75 0 011.06-1.06l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 11-1.06-1.06L15.06 12z",clipRule:"evenodd"})}),Br=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z",clipRule:"evenodd"})}),wa=a=>e.jsxs(w,{...a,children:[e.jsx("path",{d:"M4.5 6.375a.75.75 0 01.75-.75h9a.75.75 0 010 1.5h-9a.75.75 0 01-.75-.75zM4.5 10.125a.75.75 0 01.75-.75h9a.75.75 0 010 1.5h-9a.75.75 0 01-.75-.75zM4.5 13.875a.75.75 0 01.75-.75h9a.75.75 0 010 1.5h-9a.75.75 0 01-.75-.75z"}),e.jsx("path",{fillRule:"evenodd",d:"M2.25 3A1.5 1.5 0 013.75 1.5h16.5A1.5 1.5 0 0121.75 3v18A1.5 1.5 0 0120.25 22.5H3.75A1.5 1.5 0 012.25 21V3zm1.5.75v16.5h15V3.75h-15z",clipRule:"evenodd"})]}),Ur=a=>e.jsxs(w,{...a,children:[e.jsx("path",{d:"M11.723 3.322a1.5 1.5 0 01.554 0l7.5 3a1.5 1.5 0 010 2.656l-7.5 3a1.5 1.5 0 01-.554 0l-7.5-3a1.5 1.5 0 010-2.656l7.5-3z"}),e.jsx("path",{fillRule:"evenodd",d:"M3.322 8.018a.75.75 0 01.63.13l7.5 5.25a.75.75 0 00.996 0l7.5-5.25a.75.75 0 01.76.018.75.75 0 01.629 1.056l-7.5 10.5a.75.75 0 01-1.22-.001l-7.5-10.5a.75.75 0 01.63-.13z",clipRule:"evenodd"})]}),Sn=a=>e.jsxs(w,{...a,children:[e.jsx("path",{fillRule:"evenodd",d:"M12 3.75A2.25 2.25 0 009.75 6v1.5H6A2.25 2.25 0 003.75 9.75v7.5A2.25 2.25 0 006 19.5h12A2.25 2.25 0 0020.25 17.25v-7.5A2.25 2.25 0 0018 7.5h-3.75V6A2.25 2.25 0 0012 3.75zM12.75 7.5V6a.75.75 0 00-.75-.75h-.008a.75.75 0 00-.742.75v1.5h1.5z",clipRule:"evenodd"}),e.jsx("path",{d:"M5.25 9.75A.75.75 0 006 10.5h12a.75.75 0 000-1.5H6a.75.75 0 00-.75.75z"})]}),En=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M10.868 2.854a.75.75 0 011.264 0l8.25 14.25a.75.75 0 01-.632 1.146H2.25a.75.75 0 01-.632-1.146l8.25-14.25zM12 15a.75.75 0 01-.75-.75V12a.75.75 0 011.5 0v2.25A.75.75 0 0112 15zm0-4.5a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75s.75-.336.75-.75V11.25a.75.75 0 00-.75-.75z",clipRule:"evenodd"})}),An=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})}),_n=a=>e.jsx(w,{...a,children:e.jsx("path",{d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),In=a=>e.jsx(w,{...a,children:e.jsx("path",{d:"M3.75 3.75A.75.75 0 003 4.5v3.199c0 .428.18.832.488 1.118l3.054 2.871-.16.037a.75.75 0 00-.58 1.054l1.52 3.801a.75.75 0 001.44-.241l1.52-3.801a.75.75 0 00-.58-1.054l-3.054-2.87-.16-.036a.75.75 0 00-.488-1.118V4.5A.75.75 0 003.75 3.75zM13.5 3.75a.75.75 0 01.75.75v9.099l3.47 3.251a.75.75 0 01-.98 1.132l-3.99-3.722a.75.75 0 01-.22-.53V4.5a.75.75 0 01.75-.75z"})}),Cn=a=>e.jsx(w,{...a,children:e.jsx("path",{d:"M12 18.75a6 6 0 006-6v-1.5a6 6 0 00-12 0v1.5a6 6 0 006 6zM10.5 5.25a.75.75 0 00-1.5 0v.161a8.25 8.25 0 00-1.523 6.342.75.75 0 001.49.162A6.75 6.75 0 0112 5.25a6.75 6.75 0 016.745 6.665.75.75 0 001.49-.162A8.25 8.25 0 0013.5 5.411V5.25a.75.75 0 00-1.5 0v.503a6.75 6.75 0 01-1.5-.503V5.25z"})}),Rn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.5 6a.75.75 0 00-1.5 0v4.5a.75.75 0 001.5 0v-4.5zM13.5 8.25a.75.75 0 00-1.5 0v4.5a.75.75 0 001.5 0v-4.5z",clipRule:"evenodd"})}),Pn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.699a.75.75 0 01-.437-.695z",clipRule:"evenodd"})}),kn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M6 3a3 3 0 00-3 3v12a3 3 0 003 3h12a3 3 0 003-3V6a3 3 0 00-3-3H6zm1.5 1.5a.75.75 0 00-.75.75V6a.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75V5.25a.75.75 0 00-.75-.75h-1.5zm3 0a.75.75 0 00-.75.75V6a.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75V5.25a.75.75 0 00-.75-.75h-1.5zM9 9.75A.75.75 0 019.75 9h5.25a.75.75 0 010 1.5H9.75A.75.75 0 019 9.75zm.75 2.25a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z",clipRule:"evenodd"})}),Mn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 017.5 3v1.5h9V3A.75.75 0 0118 2.25a.75.75 0 01.75.75v1.5h.75a3 3 0 013 3v11.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V7.5a3 3 0 013-3h.75V3a.75.75 0 01.75-.75zM5.25 6.75c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h13.5c.621 0 1.125-.504 1.125-1.125V7.875c0-.621-.504-1.125-1.125-1.125H5.25z",clipRule:"evenodd"})}),zn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M4.804 21.644A6.707 6.707 0 006 21.75a6.75 6.75 0 006.75-6.75V9.75a.75.75 0 011.5 0v5.25A8.25 8.25 0 016 23.25a8.22 8.22 0 01-1.196-.106l-4.135 3.308a.75.75 0 01-1.152-.648V16.5a.75.75 0 01.75-.75h.03a6.75 6.75 0 006.72-6.75V4.5a.75.75 0 011.5 0v4.5a8.25 8.25 0 01-8.25 8.25h-.03a.75.75 0 01-.75.75v5.454l3.08-2.464zM15 4.5a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z",clipRule:"evenodd"})}),Tn=a=>e.jsx(w,{...a,children:e.jsx("path",{d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14.25a4.5 4.5 0 01-4.5 4.5H6.75a2.25 2.25 0 01-2.25-2.25V6.75a2.25 2.25 0 012.25-2.25h6.75a4.5 4.5 0 014.5 4.5v7.5z"})}),Ln=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 011.06 0l7.5 7.5a.75.75 0 11-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 01-1.06-1.06l7.5-7.5z",clipRule:"evenodd"})}),Dn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75v-6a.75.75 0 00-1.5 0v4.514l-1.636-1.637A9 9 0 103 12a.75.75 0 001.5 0 7.5 7.5 0 01.255-1.941z",clipRule:"evenodd"})}),On=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6.375a.75.75 0 00.75.75h6.375a.75.75 0 000-1.5H12.75V6z",clipRule:"evenodd"})}),Vn=a=>e.jsxs(w,{...a,children:[e.jsx("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.06 1.06L15.94 7.4l-5.72 5.72a.75.75 0 001.06 1.06l5.72-5.72 4.04 4.04a.75.75 0 001.06-1.06l-4.04-4.04 1.06-1.06a.75.75 0 00-1.06-1.06l-1.06 1.06L12.963 2.286z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M8.328 8.482a3.75 3.75 0 00-5.304 5.304l7.5 7.5a.75.75 0 001.06-1.06l-7.5-7.5a2.25 2.25 0 013.182-3.182l5.25 5.25a.75.75 0 001.06-1.06l-5.25-5.25a3.75 3.75 0 00-5.304 0z",clipRule:"evenodd"})]}),Fn=a=>e.jsxs(w,{...a,children:[e.jsx("path",{d:"M12 9a3.75 3.75 0 100 7.5A3.75 3.75 0 0012 9z"}),e.jsx("path",{fillRule:"evenodd",d:"M9.344 3.071a.75.75 0 01.063.023l.112.064c.32.18.66.33.997.452a8.25 8.25 0 015.972 0 1.5 1.5 0 01.997-.452l.112-.064a.75.75 0 01.063-.023a49.255 49.255 0 015.312 0 .75.75 0 01.688.882c-.314 2.392-1.282 4.6-2.736 6.368a.75.75 0 01-1.08-.027l-.027-1.08c1.454-1.768 2.422-3.976 2.736-6.368a49.22 49.22 0 00-5.312 0 .75.75 0 01-.688-.882z",clipRule:"evenodd"})]}),Bn=a=>e.jsx(w,{...a,children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.06-1.06l-3.25 3.25-1.5-1.5a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l3.75-3.75z",clipRule:"evenodd"})}),Un=a=>e.jsxs(w,{...a,children:[e.jsx("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.25c0 1.036.84 1.875 1.875 1.875h.375a3 3 0 013 3v1.5H6a.75.75 0 000 1.5h12a.75.75 0 000-1.5h-5.25v-1.5a3 3 0 013-3h.375C18.16 7.5 19 6.66 19 5.625v-2.25C19 2.34 18.16 1.5 17.125 1.5H7.875zM7.5 3.375c0-.207.168-.375.375-.375h9.25c.207 0 .375.168.375.375v2.25c0 .207-.168.375-.375.375h-9.25A.375.375 0 017.5 5.625v-2.25z",clipRule:"evenodd"}),e.jsx("path",{d:"M6 10.5a.75.75 0 01.75.75v3.75c0 .414.336.75.75.75h9a.75.75 0 00.75-.75v-3.75a.75.75 0 011.5 0v3.75a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-3.75A.75.75 0 016 10.5z"}),e.jsx("path",{d:"M6 15.75a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75a.75.75 0 01-.75-.75z"})]}),Ha=a=>{const[t,r]=i.useState(!1);return i.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia(a);n.matches!==t&&r(n.matches);const s=()=>r(n.matches);try{n.addEventListener("change",s)}catch{n.addListener(s)}return()=>{try{n.removeEventListener("change",s)}catch{n.removeListener(s)}}},[t,a]),t},Gr=a=>{switch(a.role){case A.Teacher:const t=[{id:"teacher-dashboard",label:"Mi Panel",icon:Dr}];return a.tutorOfGroup&&t.push({id:"tutor-dashboard",label:"Panel de Tutoría",icon:Ur}),t.push({id:"live-assistant",label:"Asistente IA",icon:ja}),t;case A.Guidance:return[{id:"guidance-inbox",label:"Bandeja",icon:Ze},{id:"live-assistant",label:"Asistente IA",icon:ja}];case A.Admin:return[{id:"admin-dashboard",label:"Análisis y Control",icon:Vr},{id:"guidance-inbox",label:"Bandeja General",icon:Ze},{id:"prefecture-dashboard",label:"Vista Prefectura",icon:wa}];case A.Prefect:return[{id:"prefecture-dashboard",label:"Panel de Asistencia",icon:wa},{id:"guidance-inbox",label:"Bandeja General",icon:Ze}];default:return[]}},$r=({currentUser:a,currentView:t,onViewChange:r,onUserChange:n,allUsers:s,isOpen:o,setIsOpen:l,onLogout:c})=>{const[m,p]=i.useState(!1),d=Gr(a),x=Ha("(max-width: 767px)"),b=y=>{n(y),p(!1)},g=y=>{r(y),x&&l(!1)},f=()=>e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-center h-16 border-b dark:border-gray-700",children:e.jsx(zr,{className:"h-8 w-auto"})}),e.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!m),className:"w-full flex items-center justify-between text-left p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Or,{className:"h-10 w-10 text-blue-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-semibold text-sm",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.role,a.tutorOfGroup&&` (Tutor ${a.tutorOfGroup.grade}°${a.tutorOfGroup.group})`]})]})]}),e.jsx(Br,{className:`h-5 w-5 transition-transform ${m?"rotate-180":""}`})]}),m&&e.jsx("div",{className:"absolute z-10 mt-2 w-full bg-white dark:bg-gray-900 rounded-md shadow-lg border dark:border-gray-700",children:s.map(y=>e.jsxs("button",{onClick:()=>b(y.id),className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800",children:[y.name," (",y.role,")"]},y.id))})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:d.map(y=>e.jsxs("button",{onClick:()=>g(y.id),className:`w-full flex items-center p-3 rounded-lg transition-colors ${t===y.id?"bg-blue-600 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(y.icon,{className:"h-6 w-6 mr-3"}),e.jsx("span",{className:"font-medium",children:y.label})]},y.id))}),e.jsx("div",{className:"p-4 border-t dark:border-gray-700",children:e.jsxs("button",{className:"w-full flex items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",onClick:c,disabled:!c,children:[e.jsx(Fr,{className:"h-6 w-6 mr-3"}),e.jsx("span",{className:"font-medium",children:"Cerrar Sesión"})]})})]});return x?e.jsx(He.Root,{show:o,as:i.Fragment,children:e.jsxs("div",{children:[e.jsx(He.Child,{as:i.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-30",onClick:()=>l(!1)})}),e.jsx(He.Child,{as:i.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:e.jsx("div",{className:"fixed inset-y-0 left-0 flex w-64 z-40",children:e.jsx(f,{})})})]})}):e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:e.jsx(f,{})})},Wa=[{id:"teacher-1",name:"Prof. Ana López",role:A.Teacher,tutorOfGroup:{grade:"3ro",group:"A"}},{id:"guidance-1",name:"Lic. Carlos Ruíz",role:A.Guidance},{id:"admin-1",name:"Dir. Elena Torres",role:A.Admin},{id:"prefect-1",name:"Pref. Jorge Salas",role:A.Prefect}],qr=[{id:"student-1",name:"Juan Pérez",grade:"3ro",group:"A"},{id:"student-2",name:"María García",grade:"3ro",group:"B"},{id:"student-3",name:"Luis Hernández",grade:"2do",group:"A"},{id:"student-4",name:"Sofía Martínez",grade:"1ro",group:"C"},{id:"student-5",name:"Ana Morales",grade:"3ro",group:"A"}],Hr={"teacher-dashboard":"Panel del Docente","tutor-dashboard":"Panel de Tutoría","guidance-inbox":"Bandeja de Orientación","admin-dashboard":"Panel de Coordinación y Dirección","student-profile":"Perfil del Alumno","live-assistant":"Asistente IA en Vivo","prefecture-dashboard":"Panel de Prefectura"};let la=[{id:"report-1",studentId:"student-1",teacherId:"teacher-1",date:new Date("2024-05-10T09:30:00").toISOString(),type:ne.Disciplinary,subject:"Matemáticas",description:"Juan interrumpió la clase en múltiples ocasiones, haciendo ruidos y molestando a sus compañeros. No respondió a las llamadas de atención verbales.",status:ie.InProgress,priority:oe.Medium,actionsTaken:"Se le pidió que se sentara al frente. Se le advirtió que se notificaría a sus padres.",comments:[{id:"c-1",userId:"guidance-1",userName:"Lic. Carlos Ruíz",text:"Citado para el día 13 de Mayo. Se requiere la presencia de los padres.",date:new Date("2024-05-11T11:00:00").toISOString()}],evidence:[]},{id:"report-2",studentId:"student-2",teacherId:"teacher-1",date:new Date("2024-05-08T11:00:00").toISOString(),type:ne.SocioEmotional,subject:"Historia",description:"María se mostró muy aislada y triste durante la clase. No quiso participar en la actividad grupal y se le vio llorando en silencio.",status:ie.Resolved,priority:oe.High,actionsTaken:"Se habló con ella en privado al final de la clase. Mencionó problemas familiares.",comments:[{id:"c-2",userId:"guidance-1",userName:"Lic. Carlos Ruíz",text:"Se tuvo una sesión con María. Se contactó a la familia para una junta.",date:new Date("2024-05-08T14:00:00").toISOString()}],evidence:[],resolutionNotes:"Se estableció un plan de seguimiento con la alumna y su familia. El estado de ánimo ha mejorado notablemente en las últimas semanas.",resolvedById:"guidance-1",resolvedDate:new Date("2024-05-20T16:00:00").toISOString()},{id:"report-3",studentId:"student-3",teacherId:"teacher-1",date:new Date("2024-05-21T12:15:00").toISOString(),type:ne.Disciplinary,subject:"Educación Física",description:"Luis se negó a participar en la actividad y usó lenguaje inapropiado hacia el profesor cuando se le insistió.",status:ie.New,priority:oe.High,actionsTaken:"Se le envió a la banca por el resto de la clase.",comments:[],evidence:[]},{id:"report-4",studentId:"student-1",teacherId:"prefect-1",date:new Date("2024-05-20T07:05:00").toISOString(),type:ne.Attendance,subject:"Retardo",description:"El alumno Juan Pérez llegó 5 minutos tarde a la entrada.",status:ie.New,priority:oe.Low,actionsTaken:"Se registró el retardo.",comments:[],evidence:[]},{id:"report-5",studentId:"student-1",teacherId:"prefect-1",date:new Date("2024-05-21T07:10:00").toISOString(),type:ne.Attendance,subject:"Retardo",description:"El alumno Juan Pérez llegó 10 minutos tarde a la entrada. Es su segundo retardo esta semana.",status:ie.New,priority:oe.Low,actionsTaken:"Se registró el retardo y se le dio una advertencia verbal.",comments:[],evidence:[]}],sa=[{id:"notif-1",userId:"teacher-1",message:"Orientación ha comentado en tu reporte sobre Juan Pérez.",date:new Date().toISOString(),read:!1},{id:"notif-2",userId:"admin-1",message:"Se ha detectado reincidencia de retardos para el alumno Juan Pérez.",date:new Date().toISOString(),read:!1},{id:"notif-3",userId:"guidance-1",message:"Se ha detectado reincidencia de retardos para el alumno Juan Pérez.",date:new Date().toISOString(),read:!0}];const de=a=>new Promise(t=>setTimeout(t,a)),Gn=async()=>(await de(100),la),$n=async a=>(await de(100),la.filter(t=>t.teacherId===a)),qn=async a=>(await de(100),la.filter(t=>t.studentId===a)),Hn=async a=>(await de(50),qr.find(t=>t.id===a)),Wr=async a=>(await de(100),sa.filter(t=>t.userId===a).sort((t,r)=>new Date(r.date).getTime()-new Date(t.date).getTime())),Xr=async a=>{await de(50);const t=sa.findIndex(r=>r.id===a);return t>-1?(sa[t].read=!0,!0):!1},Kr=({notifications:a,onClose:t,setNotifications:r})=>{const n=async s=>{await Xr(s)&&r(l=>l.map(c=>c.id===s?{...c,read:!0}:c))};return e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:[e.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:"Notificaciones"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.length>0?a.map(s=>e.jsxs("div",{className:`p-3 border-b border-gray-100 dark:border-gray-700 ${s.read?"opacity-60":""}`,children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.message}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.date).toLocaleString()}),!s.read&&e.jsx("button",{onClick:()=>n(s.id),className:"text-xs text-blue-500 hover:underline",children:"Marcar como leído"})]})]},s.id)):e.jsx("div",{className:"text-center p-6 text-sm text-gray-500",children:"No tienes notificaciones."})})]})},Yr=({children:a,currentUser:t,currentView:r,onViewChange:n,onUserChange:s,allUsers:o,onLogout:l})=>{const[c,m]=i.useState(!1),[p,d]=i.useState(!1),[x,b]=i.useState([]),g=Hr[r]||"AtemiMX";i.useEffect(()=>{(async()=>{const v=await Wr(t.id);b(v)})()},[t.id]);const f=x.filter(y=>!y.read).length;return e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsx($r,{currentUser:t,currentView:r,onViewChange:n,onUserChange:s,allUsers:o,isOpen:c,setIsOpen:m,onLogout:l}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[e.jsx("header",{className:"sticky top-0 bg-white dark:bg-gray-800 shadow-sm z-20",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("button",{className:"text-gray-500 hover:text-gray-600 md:hidden",onClick:()=>m(!c),"aria-label":"Open sidebar",children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx(Tr,{className:"h-6 w-6"})]}),e.jsx("h1",{className:"text-lg font-semibold ml-2 md:ml-0",children:g}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>d(y=>!y),children:[f>0&&e.jsx("span",{className:"absolute top-1 right-1 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white dark:ring-gray-800"}),e.jsx(Lr,{className:"h-6 w-6"})]}),p&&e.jsx(Kr,{notifications:x,onClose:()=>d(!1),setNotifications:b})]})]})})}),e.jsx("main",{className:"p-4 sm:p-6 lg:p-8 flex-1",children:a})]})]})},Jr=i.lazy(()=>H(()=>import("./TeacherDashboardView-Ii4KrC-3.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),Qr=i.lazy(()=>H(()=>import("./GuidanceInboxView-B0T0ZTII.js"),__vite__mapDeps([7,1,2,5,6]),import.meta.url)),Zr=i.lazy(()=>H(()=>import("./StudentProfileView-49R24dLd.js"),__vite__mapDeps([8,1,2,5,6]),import.meta.url)),en=i.lazy(()=>H(()=>import("./AdminDashboardView-CCt0sVd2.js"),__vite__mapDeps([9,1,2,6]),import.meta.url)),an=i.lazy(()=>H(()=>import("./LiveAssistantView-BkFBzRyV.js"),__vite__mapDeps([10,1,2,4,6]),import.meta.url)),tn=i.lazy(()=>H(()=>import("./PrefectureDashboardView-Bv6hGi5F.js"),__vite__mapDeps([11,1,2,3,4,5,6]),import.meta.url)),sn=i.lazy(()=>H(()=>import("./TutorDashboardView-DVvoQhHd.js"),__vite__mapDeps([12,1,2,5,6]),import.meta.url)),rn=i.lazy(()=>H(()=>import("./MobileTeacherView-uLRi8ZWg.js"),__vite__mapDeps([13,1,2]),import.meta.url)),nn=({users:a,defaultUserId:t,defaultView:r="teacher-dashboard",onLogout:n})=>{var S;const s=i.useMemo(()=>a!=null&&a.length?a:Wa,[a]),o=t??((S=s[0])==null?void 0:S.id),[l,c]=i.useState(o),[m,p]=i.useState(r),[d,x]=i.useState(null),b=Ha("(max-width: 768px)");i.useEffect(()=>{t&&c(t)},[t]),i.useEffect(()=>{r&&p(r)},[r]);const g=s.find(N=>N.id===l)||s[0],f=N=>{const P=s.find(K=>K.id===N);if(P)switch(c(N),P.role){case A.Teacher:p("teacher-dashboard");break;case A.Guidance:p("guidance-inbox");break;case A.Admin:p("admin-dashboard");break;case A.Prefect:p("prefecture-dashboard");break;default:p("teacher-dashboard")}},y=N=>{if(N.startsWith("student-profile:")){const P=N.split(":")[1];x(P),p("student-profile")}else p(N),x(null)},v=i.useCallback(N=>{y(`student-profile:${N}`)},[]),u=()=>{if(b&&g.role===A.Teacher)return e.jsx(rn,{currentUser:g});switch(m){case"teacher-dashboard":return e.jsx(Jr,{currentUser:g,viewStudentProfile:v});case"tutor-dashboard":return e.jsx(sn,{currentUser:g,viewStudentProfile:v});case"guidance-inbox":return e.jsx(Qr,{currentUser:g,viewStudentProfile:v});case"student-profile":return d?e.jsx(Zr,{studentId:d,currentUser:g,viewStudentProfile:v}):e.jsx("div",{children:"Seleccione un alumno para ver su perfil."});case"admin-dashboard":return e.jsx(en,{currentUser:g});case"prefecture-dashboard":return e.jsx(tn,{currentUser:g,viewStudentProfile:v});case"live-assistant":return e.jsx(an,{});default:return e.jsx("div",{children:"Vista no encontrada"})}};return e.jsx(Yr,{currentUser:g,currentView:m,onViewChange:y,onUserChange:f,allUsers:s,onLogout:n,children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"card",children:"Cargando módulo..."}),children:u()})})},on=a=>{if(!a)return A.Teacher;const t=a.trim().toLowerCase();return["admin","direccion","director"].includes(t)?A.Admin:["prefect","prefectura"].includes(t)?A.Prefect:["guidance","orientacion","orientador","orientadora"].includes(t)?A.Guidance:A.Teacher},ln=({user:a,role:t,onLogout:r})=>{var s;const n=i.useMemo(()=>{if(!a)return;const o=on(t),l={id:a.uid??"auth-user",name:a.displayName??a.email??"Docente Atemi",email:a.email??void 0,role:o,tutorOfGroup:o===A.Teacher?{grade:"3",group:"A"}:null},c=Wa.filter(m=>m.id!==l.id);return[l,...c]},[t,a]);return e.jsx(nn,{users:n,defaultUserId:(s=n==null?void 0:n[0])==null?void 0:s.id,onLogout:r})},cn=()=>"menu",dn=a=>a==="sase310"?"/sase310":a==="admin"?"/sase310/admin":"/",un=()=>{const{user:a,loading:t,claimsLoading:r,role:n,claimsError:s}=za(),[o,l]=i.useState(()=>cn()),[c,m]=i.useState(!1),[p,d]=i.useState(null),[x,b]=i.useState(!1),[g,f]=i.useState("unlock"),[y,v]=i.useState(null),[u,S]=i.useState(!1),[N,P]=i.useState(!0),[K,ue]=i.useState(!0),[k,W]=i.useState(!1),[me,G]=i.useState(!1),[pe,O]=i.useState(null),[$,Y]=i.useState(!1),Ee=t||r,he="atemi:pinEnabled",fe="atemi:pinValue";i.useEffect(()=>{if(!p)return;const E=window.setTimeout(()=>d(null),4e3);return()=>window.clearTimeout(E)},[p]),i.useEffect(()=>{s&&d(s)},[s]),i.useEffect(()=>{if(typeof window>"u")return;const E=window.localStorage.getItem(he)==="true",M=window.localStorage.getItem(fe);E&&M&&(G(!0),O(M),Y(!0))},[]),i.useEffect(()=>{$&&(f("unlock"),v(null),b(!0))},[$]),i.useEffect(()=>{if(typeof window>"u")return;if(!a){l("menu"),window.location.pathname!=="/"&&window.history.replaceState({},"","/");return}const E=window.location.pathname;if(E.startsWith("/sase310/admin")){l("admin");return}if(E.startsWith("/sase310")){l("sase310");return}l("menu")},[a]),i.useEffect(()=>{if(typeof window>"u")return;const E=dn(o);window.location.pathname!==E&&window.history.replaceState({},"",E)},[o]),i.useEffect(()=>{if(typeof window>"u"||!Ee)return;const M=window.setTimeout(()=>{d(Me=>Me??"No pudimos confirmar la sesion. Intenta iniciar sesion desde el modulo SASE-310.")},15e3);return()=>window.clearTimeout(M)},[Ee]),i.useEffect(()=>{!a&&(o==="admin"||o==="sase310")&&l("menu")},[a,o]);const J=i.useMemo(()=>(n??"").toLowerCase()==="admin",[n]),xe=o==="menu",X=()=>{l("menu"),typeof window<"u"&&window.history.replaceState({},"","/")},Ae=()=>{l("menu"),typeof window<"u"&&window.history.replaceState({},"","/")},ge=()=>{l("sase310"),typeof window<"u"&&window.history.replaceState({},"","/sase310")},be=()=>{if(!J){d("No cuentas con permisos de administraciï¿½n para acceder a esta secciï¿½n."),X();return}l("admin"),typeof window<"u"&&window.history.replaceState({},"","/sase310/admin")},_e=()=>{d("Consulta la documentacion AtemiMX o contacta al equipo para asistencia.")},L=()=>{d("La configuracion personalizada estara disponible proximamente.")},Ie=E=>{if(g==="setup"){typeof window<"u"&&(window.localStorage.setItem(fe,E),window.localStorage.setItem(he,"true")),O(E),G(!0),v(null),b(!1),f("unlock"),d("PIN configurado correctamente.");return}if(pe&&E===pe){Y(!1),b(!1),v(null);return}v("PIN incorrecto. Intenta nuevamente.")},Ce=()=>{typeof window<"u"&&(window.localStorage.removeItem(fe),window.localStorage.removeItem(he)),O(null),G(!1),Y(!1),W(!1),d("PIN desactivado.")},Q=()=>{W(!1),f("setup"),v(null),b(!0)},Re=()=>{S(!0)},V=()=>{P(E=>!E)},Pe=()=>{W(!0)},q=async()=>{if(!c)try{m(!0),await La(),d("Sesion finalizada correctamente.")}catch(E){console.error("[UI] Error al cerrar sesion",E),d("No fue posible cerrar sesion. Intenta nuevamente.")}finally{m(!1),X()}},F=E=>e.jsxs("section",{className:"empty-state",children:[e.jsx("p",{className:"empty-state__eyebrow",children:"AtemiMX"}),e.jsx("h2",{children:E}),e.jsx("p",{children:"Usa el menú lateral para abrir módulos o lanzar el menú flotante."})]}),Z=()=>o==="none"?F("Elige un módulo para comenzar"):o==="admin"?!a||!J?e.jsxs("section",{className:"card",children:[e.jsx("h2",{className:"text-lg font-display text-white",children:"Acceso restringido"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Necesitas permisos de administración para ingresar a este panel."})]}):e.jsx(qs,{}):o==="sase310"?e.jsx(Nr,{onNavigateHome:X}):F("Panel principal disponible desde el menú general"),ke=()=>e.jsx("div",{className:"app-shell__layer",children:e.jsxs("div",{className:"app-shell__layout",children:[e.jsx(Cr,{activeView:o,hasSession:!!a,logoutPending:c,onSelectHome:X,onResetView:Ae,onSelectSase:ge,onSelectAdmin:be,onOpenHelp:_e,onOpenSettings:L,onLogout:q,canAccessAdmin:!!(a&&J),onOpenLauncher:Re,onToggleCollapse:V,isCollapsed:N}),e.jsxs("main",{className:"app-shell__main",children:[p?e.jsx("div",{className:"app-shell__notice",children:p}):null,e.jsx(Sr,{children:e.jsx("div",{className:"app-shell__content",children:Z()})})]})]})}),ye=()=>e.jsxs("div",{className:"dashboard-wrapper",children:[p?e.jsx("div",{className:"app-shell__notice dashboard-wrapper__notice",children:p}):null,e.jsx(ln,{user:a,role:n??null,onLogout:q})]});return e.jsxs("div",{className:`app-shell${xe?" app-shell--dashboard":""}`,children:[xe?ye():ke(),e.jsx(Pr,{open:x,mode:g,errorMessage:y,onCancel:()=>{b(!1),$&&b(!0)},onSubmit:Ie}),e.jsx(Er,{open:u,onClose:()=>S(!1),onOpenSase:()=>{S(!1),ge()},onShowSecurity:()=>{S(!1),Pe()},variant:"floating",user:a}),e.jsx(Ir,{open:k,pinEnabled:me,onRequestSetup:Q,onDisable:Ce,onClose:()=>W(!1)}),K?e.jsx(_r,{onStart:()=>ue(!1)}):null]})};function mn(){return e.jsxs(e.Fragment,{children:[e.jsx(us,{}),e.jsx(ds,{}),e.jsx(un,{})]})}const pn=[{label:"Aviso de Privacidad",emoji:"📘",href:"https://docs.google.com/document/d/1fofju9x-kRUH2zU1S9LllmxPiTqQ3HcwbLVCPUhBcNM/edit?usp=sharing"},{label:"Términos de Uso",emoji:"⚖️",href:"https://docs.google.com/document/d/1Vo1o8ew31LPTwHrX1y41hklHtowaIQtMEBr0WPDdZHA/edit?usp=drive_link"},{label:"Protocolo Ángel Guardián",emoji:"🎤",href:"https://docs.google.com/document/d/1XlAIXN__SLEmX-3Dyhjig7RTZu5W3amtSfKkQCWF6uw/edit?usp=drive_link"}],hn={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at top, rgba(0, 191, 255, 0.15), transparent 55%)",padding:"24px"},fn={maxWidth:"640px",width:"100%",backgroundColor:"rgba(12, 21, 40, 0.92)",border:"1px solid rgba(0, 191, 255, 0.3)",borderRadius:"18px",padding:"32px",boxShadow:"0 20px 45px rgba(0, 0, 0, 0.35)",color:"#ecf6ff",fontFamily:'"Montserrat","Inter",system-ui,sans-serif'},xn={listStyle:"none",padding:0,margin:"20px 0",display:"flex",flexDirection:"column",gap:"12px"},gn={width:"100%",padding:"14px 18px",borderRadius:"999px",border:"none",fontSize:"1rem",fontWeight:600,cursor:"pointer",background:"linear-gradient(120deg, rgba(0, 191, 255, 0.95), rgba(255, 51, 102, 0.95))",color:"#04101f",transition:"opacity 0.2s ease"},bn=({onAccept:a})=>{const[t,r]=i.useState(!1),n=i.useMemo(()=>pn.map(s=>e.jsx("li",{children:e.jsxs("a",{href:s.href,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"10px",textDecoration:"none",color:"#a8e1ff",fontWeight:500},children:[e.jsx("span",{"aria-hidden":"true",role:"img",children:s.emoji}),e.jsx("span",{children:s.label})]})},s.href)),[]);return e.jsx("div",{style:hn,children:e.jsxs("section",{style:fn,"aria-labelledby":"legal-consent-title",children:[e.jsx("h2",{id:"legal-consent-title",style:{fontSize:"1.6rem",marginBottom:"12px"},children:"Condiciones de Uso y Privacidad"}),e.jsxs("p",{style:{color:"#c7d9ec",lineHeight:1.5},children:["Antes de usar AtemiMX, revisa los documentos oficiales del"," ",e.jsx("strong",{children:"Proyecto AtemiMX · Piloto Docente 2025–2026"}),"."]}),e.jsx("ul",{style:xn,children:n}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"10px"},children:[e.jsx("input",{id:"acceptLegal",type:"checkbox",checked:t,onChange:s=>r(s.target.checked)}),e.jsx("span",{children:"He leído y acepto los documentos anteriores."})]}),e.jsx("button",{id:"continueApp",type:"button",disabled:!t,style:{...gn,marginTop:"24px",opacity:t?1:.4,cursor:t?"pointer":"not-allowed"},onClick:a,children:"Continuar"})]})})},va="atemi:legalConsent:v1",yn=()=>{const[a,t]=i.useState(()=>typeof window>"u"?!0:window.localStorage.getItem(va)==="accepted");return i.useEffect(()=>{a&&typeof window<"u"&&window.localStorage.setItem(va,"accepted")},[a]),a?e.jsx(js,{children:e.jsx(mn,{})}):e.jsx(bn,{onAccept:()=>t(!0)})};zt.createRoot(document.getElementById("root")).render(e.jsx(Sa.StrictMode,{children:e.jsx(yn,{})}));export{Dn as A,Un as B,_n as C,Sn as D,En as E,In as F,Ze as I,qr as M,Tn as P,ie as R,Rn as S,Or as U,An as a,Gn as b,oe as c,C as d,Hn as e,qn as f,$n as g,Wa as h,On as i,wa as j,ja as k,Cn as l,kn as m,Pn as n,ne as o,Nn as p,xr as q,Ur as r,A as s,Mn as t,Ln as u,Br as v,zn as w,Vn as x,Fn as y,Bn as z};
