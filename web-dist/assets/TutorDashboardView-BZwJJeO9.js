import{r as l,j as e,K as j,i as y,k as R,M as N}from"./index-B93U3tDT.js";import{R as b}from"./ReportCard-C8iLMip1.js";import{R as w,C as T,T as C}from"./CategoricalChart-B_SJ7qfj.js";import{P as G,a as O}from"./PieChart-D_AgBBzO.js";const m=["#0088FE","#00C49F","#FFBB28","#FF8042"],E=({currentUser:o,viewStudentProfile:u})=>{const[d,n]=l.useState([]);l.useEffect(()=>{(async()=>{if(!o.tutorOfGroup)return;const t=await R(),a=N.filter(r=>{var i,c;return r.grade===((i=o.tutorOfGroup)==null?void 0:i.grade)&&r.group===((c=o.tutorOfGroup)==null?void 0:c.group)}).map(r=>r.id),f=t.filter(r=>a.includes(r.studentId)).sort((r,i)=>new Date(i.date).getTime()-new Date(r.date).getTime());n(f)})()},[o.tutorOfGroup]);const x=s=>{n(t=>t.map(a=>a.id===s.id?s:a))},p=l.useMemo(()=>{const s=d.reduce((t,a)=>(t[a.type]=(t[a.type]||0)+1,t),{});return Object.entries(s).map(([t,a])=>({name:t,value:a}))},[d]);if(!o.tutorOfGroup)return e.jsx("div",{children:"No estás asignado como tutor a ningún grupo."});const{grade:h,group:g}=o.tutorOfGroup;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(j,{className:"h-7 w-7 mr-3"}),"Panel de Tutoría - ",h,'° "',g,'"']}),d.length>0&&e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md h-72",children:[e.jsx("h4",{className:"font-semibold mb-2 text-center",children:"Reportes del Grupo por Tipo"}),e.jsx(w,{width:"100%",height:"90%",children:e.jsxs(G,{children:[e.jsx(O,{data:p,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:p.map((s,t)=>e.jsx(T,{fill:m[t%m.length]},`cell-${t}`))}),e.jsx(C,{})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center mb-4 text-gray-700 dark:text-gray-300",children:[e.jsx(y,{className:"h-6 w-6 mr-2"}),"Línea de Tiempo del Grupo"]}),d.length>0?e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx(b,{report:s,viewStudentProfile:u,onReportUpdate:x,currentUser:o},s.id))}):e.jsx("div",{className:"text-center py-10 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay reportes para tu grupo de tutoría."})})]})]})};export{E as default};
